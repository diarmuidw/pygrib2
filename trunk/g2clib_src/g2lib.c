/* Generated by Pyrex 0.9.5.1 on Tue May 15 12:21:36 2007 */

#include "Python.h"
#include "structmember.h"
#ifndef PY_LONG_LONG
  #define PY_LONG_LONG LONG_LONG
#endif
#ifdef __cplusplus
#define __PYX_EXTERN_C extern "C"
#else
#define __PYX_EXTERN_C extern
#endif
__PYX_EXTERN_C double pow(double, double);
#include "pycompat.h"
#include "stdlib.h"
#include "inttypes.h"
#include "grib2.h"


typedef struct {PyObject **p; char *s;} __Pyx_InternTabEntry; /*proto*/
typedef struct {PyObject **p; char *s; long n;} __Pyx_StringTabEntry; /*proto*/

static PyObject *__pyx_m;
static PyObject *__pyx_b;
static int __pyx_lineno;
static char *__pyx_filename;
static char **__pyx_f;

static char __pyx_mdoc[] = "Pyrex code to provide python interfaces to functions\nin the NCEP grib2c library. Make changes to this file, not the\nc-wrappers that Pyrex generates.";

static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list); /*proto*/

static PyObject *__Pyx_GetName(PyObject *dict, PyObject *name); /*proto*/

static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb); /*proto*/

static int __Pyx_PrintItem(PyObject *); /*proto*/
static int __Pyx_PrintNewline(void); /*proto*/

static int __Pyx_InternStrings(__Pyx_InternTabEntry *t); /*proto*/

static int __Pyx_InitStrings(__Pyx_StringTabEntry *t); /*proto*/

static void __Pyx_AddTraceback(char *funcname); /*proto*/

/* Declarations from g2lib */

static PyObject *__pyx_k2;
static PyObject *__pyx_k4;
static PyObject *__pyx_k5;
static PyObject *__pyx_k6;
static PyObject *__pyx_k7;


/* Implementation of g2lib */


static PyObject *__pyx_n_math;
static PyObject *__pyx_n_rtoi_ieee;
static PyObject *__pyx_n_itor_ieee;
static PyObject *__pyx_n_unpack1;
static PyObject *__pyx_n_unpack3;
static PyObject *__pyx_n_unpack4;
static PyObject *__pyx_n_unpack5;
static PyObject *__pyx_n_unpack6;
static PyObject *__pyx_n_unpack7;
static PyObject *__pyx_n_grib2_create;
static PyObject *__pyx_n_grib2_end;
static PyObject *__pyx_n_grib2_addgrid;
static PyObject *__pyx_n_grib2_addfield;
static PyObject *__pyx_n__redtoreg;
static PyObject *__pyx_n_False;
static PyObject *__pyx_n_C;

static PyObject *__pyx_n_RuntimeError;

static PyObject *__pyx_k8p;
static PyObject *__pyx_k9p;
static PyObject *__pyx_k10p;

static char (__pyx_k8[]) = "error getting buffer for input real array";
static char (__pyx_k9[]) = "error getting buffer for output integer array";
static char (__pyx_k10[]) = "integer output array must be as least as long a real input array";

static PyObject *__pyx_f_5g2lib_rtoi_ieee(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_5g2lib_rtoi_ieee[] = "\n Converts a float32 array into an int32 array of IEEE formatted values\n    ";
static PyObject *__pyx_f_5g2lib_rtoi_ieee(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_rarr = 0;
  PyObject *__pyx_v_iarr = 0;
  void (*__pyx_v_rdat);
  void (*__pyx_v_idat);
  g2float (*__pyx_v_rdata);
  g2int (*__pyx_v_idata);
  Py_ssize_t __pyx_v_bufleni;
  Py_ssize_t __pyx_v_buflenr;
  PyObject *__pyx_r;
  int __pyx_1;
  PyObject *__pyx_2 = 0;
  static char *__pyx_argnames[] = {"rarr","iarr",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "OO", __pyx_argnames, &__pyx_v_rarr, &__pyx_v_iarr)) return 0;
  Py_INCREF(__pyx_v_rarr);
  Py_INCREF(__pyx_v_iarr);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":66 */
  __pyx_1 = (PyObject_AsReadBuffer(__pyx_v_rarr,(&__pyx_v_rdat),(&__pyx_v_buflenr)) != 0);
  if (__pyx_1) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":67 */
    __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_RuntimeError); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 67; goto __pyx_L1;}
    __Pyx_Raise(__pyx_2, __pyx_k8p, 0);
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 67; goto __pyx_L1;}
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":68 */
  __pyx_1 = (PyObject_AsWriteBuffer(__pyx_v_iarr,(&__pyx_v_idat),(&__pyx_v_bufleni)) != 0);
  if (__pyx_1) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":69 */
    __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_RuntimeError); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 69; goto __pyx_L1;}
    __Pyx_Raise(__pyx_2, __pyx_k9p, 0);
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 69; goto __pyx_L1;}
    goto __pyx_L3;
  }
  __pyx_L3:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":70 */
  __pyx_1 = (__pyx_v_bufleni < __pyx_v_buflenr);
  if (__pyx_1) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":71 */
    __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_RuntimeError); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 71; goto __pyx_L1;}
    __Pyx_Raise(__pyx_2, __pyx_k10p, 0);
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 71; goto __pyx_L1;}
    goto __pyx_L4;
  }
  __pyx_L4:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":72 */
  __pyx_v_rdata = ((g2float (*))__pyx_v_rdat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":73 */
  __pyx_v_idata = ((g2int (*))__pyx_v_idat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":74 */
  mkieee(__pyx_v_rdata,__pyx_v_idata,(__pyx_v_buflenr / 4));

  __pyx_r = Py_None; Py_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_2);
  __Pyx_AddTraceback("g2lib.rtoi_ieee");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_rarr);
  Py_DECREF(__pyx_v_iarr);
  return __pyx_r;
}

static PyObject *__pyx_k11p;
static PyObject *__pyx_k12p;
static PyObject *__pyx_k13p;

static char (__pyx_k11[]) = "error getting buffer for output real array";
static char (__pyx_k12[]) = "error getting buffer for input integer array";
static char (__pyx_k13[]) = "real output array must be as least as long a integerinput array";

static PyObject *__pyx_f_5g2lib_itor_ieee(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_5g2lib_itor_ieee[] = "\n Converts an int32 array of IEEE values into a float32 array.\n    ";
static PyObject *__pyx_f_5g2lib_itor_ieee(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_iarr = 0;
  PyObject *__pyx_v_rarr = 0;
  void (*__pyx_v_rdat);
  void (*__pyx_v_idat);
  g2float (*__pyx_v_rdata);
  g2int (*__pyx_v_idata);
  Py_ssize_t __pyx_v_bufleni;
  Py_ssize_t __pyx_v_buflenr;
  PyObject *__pyx_r;
  int __pyx_1;
  PyObject *__pyx_2 = 0;
  static char *__pyx_argnames[] = {"iarr","rarr",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "OO", __pyx_argnames, &__pyx_v_iarr, &__pyx_v_rarr)) return 0;
  Py_INCREF(__pyx_v_iarr);
  Py_INCREF(__pyx_v_rarr);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":84 */
  __pyx_1 = (PyObject_AsReadBuffer(__pyx_v_rarr,(&__pyx_v_rdat),(&__pyx_v_buflenr)) != 0);
  if (__pyx_1) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":85 */
    __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_RuntimeError); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 85; goto __pyx_L1;}
    __Pyx_Raise(__pyx_2, __pyx_k11p, 0);
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 85; goto __pyx_L1;}
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":86 */
  __pyx_1 = (PyObject_AsWriteBuffer(__pyx_v_iarr,(&__pyx_v_idat),(&__pyx_v_bufleni)) != 0);
  if (__pyx_1) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":87 */
    __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_RuntimeError); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 87; goto __pyx_L1;}
    __Pyx_Raise(__pyx_2, __pyx_k12p, 0);
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 87; goto __pyx_L1;}
    goto __pyx_L3;
  }
  __pyx_L3:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":88 */
  __pyx_1 = (__pyx_v_buflenr < __pyx_v_bufleni);
  if (__pyx_1) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":89 */
    __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_RuntimeError); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 89; goto __pyx_L1;}
    __Pyx_Raise(__pyx_2, __pyx_k13p, 0);
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 89; goto __pyx_L1;}
    goto __pyx_L4;
  }
  __pyx_L4:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":90 */
  __pyx_v_rdata = ((g2float (*))__pyx_v_rdat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":91 */
  __pyx_v_idata = ((g2int (*))__pyx_v_idat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":92 */
  rdieee(__pyx_v_idata,__pyx_v_rdata,(__pyx_v_bufleni / 4));

  __pyx_r = Py_None; Py_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_2);
  __Pyx_AddTraceback("g2lib.itor_ieee");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_iarr);
  Py_DECREF(__pyx_v_rarr);
  return __pyx_r;
}

static PyObject *__pyx_n_i;

static PyObject *__pyx_k14p;

static char (__pyx_k14[]) = "Error unpacking section 1 - error code = %i";

static PyObject *__pyx_f_5g2lib_unpack1(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_5g2lib_unpack1[] = "              .      .    .                                       .\n Unpacks Section 1 (Identification Section) as defined in GRIB Edition 2.\n \n idsect,ipos = unpack1(gribmsg,ipos)\n\n INPUTS:\n  gribmsg - chararcter string containing Section 1 of the GRIB2 message\n  ipos    - Byte offset for the beginning of Section 1 in gribmsg.\n  zeros   - Numeric/numpy array/scip.base zeros function (used to allocate\n            output python arrays).  Python is used to allocate the arrays\n            so no implementation-specific (Numeric, numpy array, scipy_core)\n            C API functions need to be used.  This means that any of these\n            array modules can be used simply by changing the import statement\n            in your python code.\n RETURNS:\n  ipos    - Byte offset at the end of Section 1.\n  idsect  - numpy array containing information \n            read from Section 1, the Identification section.\n            idsect[0]   = Identification of originating Centre\n                                 ( see Common Code Table C-1 )\n            idsect[1]   = Identification of originating Sub-centre\n            idsect[2]   = GRIB Master Tables Version Number\n                                 ( see Code Table 1.0 )\n            idsect[3]   = GRIB Local Tables Version Number\n                                 ( see Code Table 1.1 )\n            idsect[4]   = Significance of Reference Time (Code Table 1.2)\n            idsect[5]   = Year ( 4 digits )\n            idsect[6]   = Month\n            idsect[7]   = Day\n            idsect[8]   = Hour\n            idsect[9]   = Minute\n            idsect[10]  = Second\n            idsect[11]  = Production status of processed data\n                                 ( see Code Table 1.3 )\n            idsect[12]  = Type of processed data ( see Code Table 1.4 )\n ERROR CODES:   2 = Array passed is not section 1\n                6 = memory allocation error\n    ";
static PyObject *__pyx_f_5g2lib_unpack1(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_gribmsg = 0;
  PyObject *__pyx_v_ipos = 0;
  PyObject *__pyx_v_zeros = 0;
  unsigned char (*__pyx_v_cgrib);
  g2int __pyx_v_i;
  g2int __pyx_v_iofst;
  g2int __pyx_v_ierr;
  g2int __pyx_v_idslen;
  Py_ssize_t __pyx_v_buflen;
  g2int (*__pyx_v_ids);
  g2int (*__pyx_v_idsectdata);
  void (*__pyx_v_idsectdat);
  PyObject *__pyx_v_msg;
  PyObject *__pyx_v_idsect;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  int __pyx_3;
  PyObject *__pyx_4 = 0;
  static char *__pyx_argnames[] = {"gribmsg","ipos","zeros",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "OOO", __pyx_argnames, &__pyx_v_gribmsg, &__pyx_v_ipos, &__pyx_v_zeros)) return 0;
  Py_INCREF(__pyx_v_gribmsg);
  Py_INCREF(__pyx_v_ipos);
  Py_INCREF(__pyx_v_zeros);
  __pyx_v_msg = Py_None; Py_INCREF(Py_None);
  __pyx_v_idsect = Py_None; Py_INCREF(Py_None);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":140 */
  __pyx_v_cgrib = ((unsigned char (*))PyString_AsString(__pyx_v_gribmsg));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":141 */
  __pyx_1 = PyInt_FromLong(8); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 141; goto __pyx_L1;}
  __pyx_2 = PyNumber_Multiply(__pyx_v_ipos, __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 141; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  __pyx_v_iofst = ((long )PyInt_AsLong(__pyx_2));
  Py_DECREF(__pyx_2); __pyx_2 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":142 */
  __pyx_v_ierr = g2_unpack1(__pyx_v_cgrib,(&__pyx_v_iofst),(&__pyx_v_ids),(&__pyx_v_idslen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":143 */
  __pyx_3 = (__pyx_v_ierr != 0);
  if (__pyx_3) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":144 */
    __pyx_1 = PyInt_FromLong(__pyx_v_ierr); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 144; goto __pyx_L1;}
    __pyx_2 = PyNumber_Remainder(__pyx_k14p, __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 144; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_v_msg);
    __pyx_v_msg = __pyx_2;
    __pyx_2 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":145 */
    __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_RuntimeError); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 145; goto __pyx_L1;}
    __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 145; goto __pyx_L1;}
    Py_INCREF(__pyx_v_msg);
    PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_msg);
    __pyx_4 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 145; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    __Pyx_Raise(__pyx_4, 0, 0);
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 145; goto __pyx_L1;}
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":146 */
  __pyx_1 = PyInt_FromLong(__pyx_v_idslen); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 146; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(2); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 146; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_1);
  Py_INCREF(__pyx_n_i);
  PyTuple_SET_ITEM(__pyx_2, 1, __pyx_n_i);
  __pyx_1 = 0;
  __pyx_4 = PyObject_CallObject(__pyx_v_zeros, __pyx_2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 146; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_v_idsect);
  __pyx_v_idsect = __pyx_4;
  __pyx_4 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":148 */
  PyObject_AsWriteBuffer(__pyx_v_idsect,(&__pyx_v_idsectdat),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":149 */
  __pyx_v_idsectdata = ((g2int (*))__pyx_v_idsectdat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":151 */
  for (__pyx_v_i = 0; __pyx_v_i < __pyx_v_idslen; ++__pyx_v_i) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":152 */
    (__pyx_v_idsectdata[__pyx_v_i]) = (__pyx_v_ids[__pyx_v_i]);
  }

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":153 */
  free(__pyx_v_ids);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":154 */
  __pyx_1 = PyInt_FromLong((__pyx_v_iofst / 8)); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 154; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(2); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 154; goto __pyx_L1;}
  Py_INCREF(__pyx_v_idsect);
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_idsect);
  PyTuple_SET_ITEM(__pyx_2, 1, __pyx_1);
  __pyx_1 = 0;
  __pyx_r = __pyx_2;
  __pyx_2 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_4);
  __Pyx_AddTraceback("g2lib.unpack1");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_msg);
  Py_DECREF(__pyx_v_idsect);
  Py_DECREF(__pyx_v_gribmsg);
  Py_DECREF(__pyx_v_ipos);
  Py_DECREF(__pyx_v_zeros);
  return __pyx_r;
}

static PyObject *__pyx_k16p;

static char (__pyx_k16[]) = "Error unpacking section 3 - error code = %i";

static PyObject *__pyx_f_5g2lib_unpack3(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_5g2lib_unpack3[] = "\n Unpacks Section 3 (Grid Definition Section) as defined in GRIB Edition 2.\n\n gds,gdtmpl,deflist,ipos = unpack3(gribmsg,ipos)\n \n INPUTS:\n cgrib    - Char array ontaining Section 3 of the GRIB2 message\n iofst    - Byte offset for the beginning of Section 3 in cgrib.\n zeros    - Numeric/numpy array/scip.base zeros function (used to allocate\n            output python arrays).  Python is used to allocate the arrays\n            so no implementation-specific (Numeric, numpy array, scipy_core)\n            C API functions need to be used.  This means that any of these\n            array modules can be used simply by changing the import statement\n            in your python code.\n\n RETURNS:      \n ipos     - Byte offset at the end of Section 3, returned.\n  gds     - numpy array containg information read from the appropriate GRIB Grid \n            Definition Section 3 for the field being returned.\n            gds[0]=Source of grid definition (see Code Table 3.0)\n            gds[1]=Number of grid points in the defined grid.\n            gds[2]=Number of octets needed for each \n                        additional grid points definition.  \n                        Used to define number of\n                        points in each row ( or column ) for\n                        non-regular grids.  \n                        = 0, if using regular grid.\n            gds[3]=Interpretation of list for optional points \n                        definition.  (Code Table 3.11)\n            gds[4]=Grid Definition Template Number (Code Table 3.1)\n gdstmpl -  numpy array containing the data values for \n            the specified Grid Definition\n            Template ( NN=gds[4] ).  Each element of this integer \n            array contains an entry (in the order specified) of Grid\n            Defintion Template 3.NN\n deflist -  (Used if gds[2] != 0) numpy array containing\n            the number of grid points contained in each row ( or column ).\n            (part of Section 3)\n ERROR CODES:   2 = Not Section 3\n                5 = \"GRIB\" message contains an undefined Grid Definition\n                    Template.\n                6 = memory allocation error\n    ";
static PyObject *__pyx_f_5g2lib_unpack3(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_gribmsg = 0;
  PyObject *__pyx_v_ipos = 0;
  PyObject *__pyx_v_zeros = 0;
  unsigned char (*__pyx_v_cgrib);
  g2int (*__pyx_v_igds);
  g2int (*__pyx_v_igdstmpl);
  g2int (*__pyx_v_ideflist);
  g2int (*__pyx_v_gdtmpldata);
  g2int (*__pyx_v_gdsdata);
  g2int (*__pyx_v_deflistdata);
  void (*__pyx_v_gdtmpldat);
  void (*__pyx_v_gdsdat);
  void (*__pyx_v_deflistdat);
  g2int __pyx_v_mapgridlen;
  g2int __pyx_v_iofst;
  g2int __pyx_v_idefnum;
  g2int __pyx_v_ierr;
  Py_ssize_t __pyx_v_buflen;
  PyObject *__pyx_v_msg;
  PyObject *__pyx_v_gdtmpl;
  PyObject *__pyx_v_gds;
  PyObject *__pyx_v_deflist;
  PyObject *__pyx_v_i;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  int __pyx_3;
  PyObject *__pyx_4 = 0;
  long __pyx_5;
  int __pyx_6;
  static char *__pyx_argnames[] = {"gribmsg","ipos","zeros",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "OOO", __pyx_argnames, &__pyx_v_gribmsg, &__pyx_v_ipos, &__pyx_v_zeros)) return 0;
  Py_INCREF(__pyx_v_gribmsg);
  Py_INCREF(__pyx_v_ipos);
  Py_INCREF(__pyx_v_zeros);
  __pyx_v_msg = Py_None; Py_INCREF(Py_None);
  __pyx_v_gdtmpl = Py_None; Py_INCREF(Py_None);
  __pyx_v_gds = Py_None; Py_INCREF(Py_None);
  __pyx_v_deflist = Py_None; Py_INCREF(Py_None);
  __pyx_v_i = Py_None; Py_INCREF(Py_None);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":205 */
  __pyx_v_cgrib = ((unsigned char (*))PyString_AsString(__pyx_v_gribmsg));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":206 */
  __pyx_1 = PyInt_FromLong(8); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 206; goto __pyx_L1;}
  __pyx_2 = PyNumber_Multiply(__pyx_v_ipos, __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 206; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  __pyx_v_iofst = ((long )PyInt_AsLong(__pyx_2));
  Py_DECREF(__pyx_2); __pyx_2 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":207 */
  __pyx_v_ierr = g2_unpack3(__pyx_v_cgrib,(&__pyx_v_iofst),(&__pyx_v_igds),(&__pyx_v_igdstmpl),(&__pyx_v_mapgridlen),(&__pyx_v_ideflist),(&__pyx_v_idefnum));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":208 */
  __pyx_3 = (__pyx_v_ierr != 0);
  if (__pyx_3) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":209 */
    __pyx_1 = PyInt_FromLong(__pyx_v_ierr); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 209; goto __pyx_L1;}
    __pyx_2 = PyNumber_Remainder(__pyx_k16p, __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 209; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_v_msg);
    __pyx_v_msg = __pyx_2;
    __pyx_2 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":210 */
    __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_RuntimeError); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 210; goto __pyx_L1;}
    __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 210; goto __pyx_L1;}
    Py_INCREF(__pyx_v_msg);
    PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_msg);
    __pyx_4 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 210; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    __Pyx_Raise(__pyx_4, 0, 0);
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 210; goto __pyx_L1;}
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":212 */
  __pyx_1 = PyInt_FromLong(__pyx_v_mapgridlen); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 212; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(2); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 212; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_1);
  Py_INCREF(__pyx_n_i);
  PyTuple_SET_ITEM(__pyx_2, 1, __pyx_n_i);
  __pyx_1 = 0;
  __pyx_4 = PyObject_CallObject(__pyx_v_zeros, __pyx_2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 212; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_v_gdtmpl);
  __pyx_v_gdtmpl = __pyx_4;
  __pyx_4 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":213 */
  __pyx_1 = PyInt_FromLong(5); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 213; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(2); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 213; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_1);
  Py_INCREF(__pyx_n_i);
  PyTuple_SET_ITEM(__pyx_2, 1, __pyx_n_i);
  __pyx_1 = 0;
  __pyx_4 = PyObject_CallObject(__pyx_v_zeros, __pyx_2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 213; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_v_gds);
  __pyx_v_gds = __pyx_4;
  __pyx_4 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":214 */
  __pyx_1 = PyInt_FromLong(__pyx_v_idefnum); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 214; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(2); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 214; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_1);
  Py_INCREF(__pyx_n_i);
  PyTuple_SET_ITEM(__pyx_2, 1, __pyx_n_i);
  __pyx_1 = 0;
  __pyx_4 = PyObject_CallObject(__pyx_v_zeros, __pyx_2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 214; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_v_deflist);
  __pyx_v_deflist = __pyx_4;
  __pyx_4 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":216 */
  PyObject_AsWriteBuffer(__pyx_v_gdtmpl,(&__pyx_v_gdtmpldat),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":217 */
  PyObject_AsWriteBuffer(__pyx_v_gds,(&__pyx_v_gdsdat),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":218 */
  PyObject_AsWriteBuffer(__pyx_v_deflist,(&__pyx_v_deflistdat),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":219 */
  __pyx_v_gdtmpldata = ((g2int (*))__pyx_v_gdtmpldat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":220 */
  __pyx_v_gdsdata = ((g2int (*))__pyx_v_gdsdat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":221 */
  __pyx_v_deflistdata = ((g2int (*))__pyx_v_deflistdat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":223 */
  for (__pyx_5 = 0; __pyx_5 < __pyx_v_mapgridlen; ++__pyx_5) {
    __pyx_1 = PyInt_FromLong(__pyx_5); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 223; goto __pyx_L1;}
    Py_DECREF(__pyx_v_i);
    __pyx_v_i = __pyx_1;
    __pyx_1 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":224 */
    __pyx_3 = PyInt_AsLong(__pyx_v_i); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 224; goto __pyx_L1;}
    __pyx_6 = PyInt_AsLong(__pyx_v_i); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 224; goto __pyx_L1;}
    (__pyx_v_gdtmpldata[__pyx_6]) = (__pyx_v_igdstmpl[__pyx_3]);
  }

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":225 */
  free(__pyx_v_igdstmpl);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":226 */
  for (__pyx_5 = 0; __pyx_5 < 5; ++__pyx_5) {
    __pyx_2 = PyInt_FromLong(__pyx_5); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 226; goto __pyx_L1;}
    Py_DECREF(__pyx_v_i);
    __pyx_v_i = __pyx_2;
    __pyx_2 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":227 */
    __pyx_3 = PyInt_AsLong(__pyx_v_i); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 227; goto __pyx_L1;}
    __pyx_6 = PyInt_AsLong(__pyx_v_i); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 227; goto __pyx_L1;}
    (__pyx_v_gdsdata[__pyx_6]) = (__pyx_v_igds[__pyx_3]);
  }

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":228 */
  free(__pyx_v_igds);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":229 */
  for (__pyx_5 = 0; __pyx_5 < __pyx_v_idefnum; ++__pyx_5) {
    __pyx_4 = PyInt_FromLong(__pyx_5); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 229; goto __pyx_L1;}
    Py_DECREF(__pyx_v_i);
    __pyx_v_i = __pyx_4;
    __pyx_4 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":230 */
    __pyx_3 = PyInt_AsLong(__pyx_v_i); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 230; goto __pyx_L1;}
    __pyx_6 = PyInt_AsLong(__pyx_v_i); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 230; goto __pyx_L1;}
    (__pyx_v_deflistdata[__pyx_6]) = (__pyx_v_ideflist[__pyx_3]);
  }

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":231 */
  free(__pyx_v_ideflist);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":232 */
  __pyx_1 = PyInt_FromLong((__pyx_v_iofst / 8)); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 232; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(4); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 232; goto __pyx_L1;}
  Py_INCREF(__pyx_v_gds);
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_gds);
  Py_INCREF(__pyx_v_gdtmpl);
  PyTuple_SET_ITEM(__pyx_2, 1, __pyx_v_gdtmpl);
  Py_INCREF(__pyx_v_deflist);
  PyTuple_SET_ITEM(__pyx_2, 2, __pyx_v_deflist);
  PyTuple_SET_ITEM(__pyx_2, 3, __pyx_1);
  __pyx_1 = 0;
  __pyx_r = __pyx_2;
  __pyx_2 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_4);
  __Pyx_AddTraceback("g2lib.unpack3");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_msg);
  Py_DECREF(__pyx_v_gdtmpl);
  Py_DECREF(__pyx_v_gds);
  Py_DECREF(__pyx_v_deflist);
  Py_DECREF(__pyx_v_i);
  Py_DECREF(__pyx_v_gribmsg);
  Py_DECREF(__pyx_v_ipos);
  Py_DECREF(__pyx_v_zeros);
  return __pyx_r;
}

static PyObject *__pyx_n_f;

static PyObject *__pyx_k20p;

static char (__pyx_k20[]) = "Error unpacking section 4 - error code = %i";

static PyObject *__pyx_f_5g2lib_unpack4(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_5g2lib_unpack4[] = "\n Unpacks Section 4 (Product Definition Section) as defined in GRIB Edition 2.\n\n pdtmpl,pdtnum,coordlist,ipos = unpack4(gribmsg,ipos)\n \n INPUTS:\n   gribmsg  - Character string containing Section 4 of the GRIB2 message\n   ipos     - Byte offset of the beginning of Section 4 in cgrib.\n   zeros    - Numeric/numpy array/scip.base zeros function (used to allocate\n              output python arrays).  Python is used to allocate the arrays\n              so no implementation-specific (Numeric, numpy array, scipy_core)\n              C API functions need to be used.  This means that any of these\n              array modules can be used simply by changing the import statement\n              in your python code.\n\n RETURNS:       \n   pdtmpl   -  numpy array containing the data values for \n               the specified Product Definition\n               Template ( N=ipdsnum ).  Each element of this integer\n               array contains an entry (in the order specified) \n               of Product Defintion Template 4.N               \n   pdtnum    - Product Definition Template Number ( see Code Table 4.0)   \n   coordlist - numpy array containing floating point values \n               intended to document\n               the vertical discretisation associated to model data\n               on hybrid coordinate vertical levels.  (part of Section 4)\n   ipos      - Byte offset of the end of Section 4, returned.\n\n ERROR CODES: 2 = Not section 4\n              5 = \"GRIB\" message contains an undefined Product Definition\n                  Template.\n              6 = memory allocation error\n    ";
static PyObject *__pyx_f_5g2lib_unpack4(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_gribmsg = 0;
  PyObject *__pyx_v_ipos = 0;
  PyObject *__pyx_v_zeros = 0;
  unsigned char (*__pyx_v_cgrib);
  g2int (*__pyx_v_ipdstmpl);
  g2int (*__pyx_v_pdtmpldata);
  g2float (*__pyx_v_icoordlist);
  g2float (*__pyx_v_coordlistdata);
  g2int __pyx_v_mappdslen;
  g2int __pyx_v_iofst;
  g2int __pyx_v_ipdsnum;
  g2int __pyx_v_ierr;
  g2int __pyx_v_numcoord;
  void (*__pyx_v_pdtmpldat);
  void (*__pyx_v_coordlistdat);
  Py_ssize_t __pyx_v_buflen;
  PyObject *__pyx_v_msg;
  PyObject *__pyx_v_pdtmpl;
  PyObject *__pyx_v_coordlist;
  PyObject *__pyx_v_i;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  int __pyx_3;
  PyObject *__pyx_4 = 0;
  long __pyx_5;
  int __pyx_6;
  static char *__pyx_argnames[] = {"gribmsg","ipos","zeros",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "OOO", __pyx_argnames, &__pyx_v_gribmsg, &__pyx_v_ipos, &__pyx_v_zeros)) return 0;
  Py_INCREF(__pyx_v_gribmsg);
  Py_INCREF(__pyx_v_ipos);
  Py_INCREF(__pyx_v_zeros);
  __pyx_v_msg = Py_None; Py_INCREF(Py_None);
  __pyx_v_pdtmpl = Py_None; Py_INCREF(Py_None);
  __pyx_v_coordlist = Py_None; Py_INCREF(Py_None);
  __pyx_v_i = Py_None; Py_INCREF(Py_None);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":274 */
  __pyx_v_cgrib = ((unsigned char (*))PyString_AsString(__pyx_v_gribmsg));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":275 */
  __pyx_1 = PyInt_FromLong(8); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 275; goto __pyx_L1;}
  __pyx_2 = PyNumber_Multiply(__pyx_v_ipos, __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 275; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  __pyx_v_iofst = ((long )PyInt_AsLong(__pyx_2));
  Py_DECREF(__pyx_2); __pyx_2 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":276 */
  __pyx_v_ierr = g2_unpack4(__pyx_v_cgrib,(&__pyx_v_iofst),(&__pyx_v_ipdsnum),(&__pyx_v_ipdstmpl),(&__pyx_v_mappdslen),(&__pyx_v_icoordlist),(&__pyx_v_numcoord));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":277 */
  __pyx_3 = (__pyx_v_ierr != 0);
  if (__pyx_3) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":278 */
    __pyx_1 = PyInt_FromLong(__pyx_v_ierr); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 278; goto __pyx_L1;}
    __pyx_2 = PyNumber_Remainder(__pyx_k20p, __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 278; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_v_msg);
    __pyx_v_msg = __pyx_2;
    __pyx_2 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":279 */
    __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_RuntimeError); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 279; goto __pyx_L1;}
    __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 279; goto __pyx_L1;}
    Py_INCREF(__pyx_v_msg);
    PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_msg);
    __pyx_4 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 279; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    __Pyx_Raise(__pyx_4, 0, 0);
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 279; goto __pyx_L1;}
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":281 */
  __pyx_1 = PyInt_FromLong(__pyx_v_mappdslen); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 281; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(2); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 281; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_1);
  Py_INCREF(__pyx_n_i);
  PyTuple_SET_ITEM(__pyx_2, 1, __pyx_n_i);
  __pyx_1 = 0;
  __pyx_4 = PyObject_CallObject(__pyx_v_zeros, __pyx_2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 281; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_v_pdtmpl);
  __pyx_v_pdtmpl = __pyx_4;
  __pyx_4 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":282 */
  __pyx_1 = PyInt_FromLong(__pyx_v_numcoord); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 282; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(2); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 282; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_1);
  Py_INCREF(__pyx_n_f);
  PyTuple_SET_ITEM(__pyx_2, 1, __pyx_n_f);
  __pyx_1 = 0;
  __pyx_4 = PyObject_CallObject(__pyx_v_zeros, __pyx_2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 282; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_v_coordlist);
  __pyx_v_coordlist = __pyx_4;
  __pyx_4 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":284 */
  PyObject_AsWriteBuffer(__pyx_v_pdtmpl,(&__pyx_v_pdtmpldat),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":285 */
  PyObject_AsWriteBuffer(__pyx_v_coordlist,(&__pyx_v_coordlistdat),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":286 */
  __pyx_v_pdtmpldata = ((g2int (*))__pyx_v_pdtmpldat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":287 */
  __pyx_v_coordlistdata = ((g2float (*))__pyx_v_coordlistdat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":289 */
  for (__pyx_5 = 0; __pyx_5 < __pyx_v_mappdslen; ++__pyx_5) {
    __pyx_1 = PyInt_FromLong(__pyx_5); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 289; goto __pyx_L1;}
    Py_DECREF(__pyx_v_i);
    __pyx_v_i = __pyx_1;
    __pyx_1 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":290 */
    __pyx_3 = PyInt_AsLong(__pyx_v_i); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 290; goto __pyx_L1;}
    __pyx_6 = PyInt_AsLong(__pyx_v_i); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 290; goto __pyx_L1;}
    (__pyx_v_pdtmpldata[__pyx_6]) = (__pyx_v_ipdstmpl[__pyx_3]);
  }

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":291 */
  free(__pyx_v_ipdstmpl);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":292 */
  for (__pyx_5 = 0; __pyx_5 < __pyx_v_numcoord; ++__pyx_5) {
    __pyx_2 = PyInt_FromLong(__pyx_5); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 292; goto __pyx_L1;}
    Py_DECREF(__pyx_v_i);
    __pyx_v_i = __pyx_2;
    __pyx_2 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":293 */
    __pyx_3 = PyInt_AsLong(__pyx_v_i); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 293; goto __pyx_L1;}
    __pyx_6 = PyInt_AsLong(__pyx_v_i); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 293; goto __pyx_L1;}
    (__pyx_v_coordlistdata[__pyx_6]) = (__pyx_v_icoordlist[__pyx_3]);
  }

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":294 */
  free(__pyx_v_icoordlist);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":295 */
  __pyx_4 = PyInt_FromLong(__pyx_v_ipdsnum); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 295; goto __pyx_L1;}
  __pyx_1 = PyInt_FromLong((__pyx_v_iofst / 8)); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 295; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(4); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 295; goto __pyx_L1;}
  Py_INCREF(__pyx_v_pdtmpl);
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_pdtmpl);
  PyTuple_SET_ITEM(__pyx_2, 1, __pyx_4);
  Py_INCREF(__pyx_v_coordlist);
  PyTuple_SET_ITEM(__pyx_2, 2, __pyx_v_coordlist);
  PyTuple_SET_ITEM(__pyx_2, 3, __pyx_1);
  __pyx_4 = 0;
  __pyx_1 = 0;
  __pyx_r = __pyx_2;
  __pyx_2 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_4);
  __Pyx_AddTraceback("g2lib.unpack4");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_msg);
  Py_DECREF(__pyx_v_pdtmpl);
  Py_DECREF(__pyx_v_coordlist);
  Py_DECREF(__pyx_v_i);
  Py_DECREF(__pyx_v_gribmsg);
  Py_DECREF(__pyx_v_ipos);
  Py_DECREF(__pyx_v_zeros);
  return __pyx_r;
}

static PyObject *__pyx_k23p;

static char (__pyx_k23[]) = "Error unpacking section 5 - error code = %i";

static PyObject *__pyx_f_5g2lib_unpack5(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_5g2lib_unpack5[] = "\n Unpacks Section 5 (Data Representation Section) as defined in GRIB Edition 2.\n\n drtmpl,drtnum,ndpts,ipos = unpack5(gribmsg,ipos)\n\n INPUTS:\n   gribmsg  - Character string containing Section 5 of the GRIB2 message\n   ipos     - Byte offset for the beginning of Section 5 in cgrib.\n   zeros   - Numeric/numpy array/scip.base zeros function (used to allocate\n             output python arrays).  Python is used to allocate the arrays\n             so no implementation-specific (Numeric, numpy array, scipy_core)\n             C API functions need to be used.  This means that any of these\n             array modules can be used simply by changing the import statement\n             in your python code.\n\n RETURNS:      \n   drtmpl  -  numpy array containing the data values for \n              the specified Data Representation\n              Template ( N=idrsnum ).  Each element of this integer\n              array contains an entry (in the order specified) of Data\n              Representation Template 5.N\n   drtnum   - Data Representation Template Number ( see Code Table 5.0)\n   ndpts    - Number of data points to be unpacked (in sxns 6 and 7).\n   ipos     - Byte offset at the end of Section 5.\n\n ERROR CODES: 2 = Not Section 5\n              6 = memory allocation error\n              7 = \"GRIB\" message contains an undefined Data\n                  Representation Template\n    ";
static PyObject *__pyx_f_5g2lib_unpack5(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_gribmsg = 0;
  PyObject *__pyx_v_ipos = 0;
  PyObject *__pyx_v_zeros = 0;
  unsigned char (*__pyx_v_cgrib);
  g2int (*__pyx_v_idrstmpl);
  g2int (*__pyx_v_drtmpldata);
  void (*__pyx_v_drtmpldat);
  g2int __pyx_v_iofst;
  g2int __pyx_v_ierr;
  g2int __pyx_v_ndpts;
  g2int __pyx_v_idrsnum;
  g2int __pyx_v_mapdrslen;
  Py_ssize_t __pyx_v_buflen;
  PyObject *__pyx_v_msg;
  PyObject *__pyx_v_drtmpl;
  PyObject *__pyx_v_i;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  int __pyx_3;
  PyObject *__pyx_4 = 0;
  long __pyx_5;
  int __pyx_6;
  PyObject *__pyx_7 = 0;
  static char *__pyx_argnames[] = {"gribmsg","ipos","zeros",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "OOO", __pyx_argnames, &__pyx_v_gribmsg, &__pyx_v_ipos, &__pyx_v_zeros)) return 0;
  Py_INCREF(__pyx_v_gribmsg);
  Py_INCREF(__pyx_v_ipos);
  Py_INCREF(__pyx_v_zeros);
  __pyx_v_msg = Py_None; Py_INCREF(Py_None);
  __pyx_v_drtmpl = Py_None; Py_INCREF(Py_None);
  __pyx_v_i = Py_None; Py_INCREF(Py_None);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":333 */
  __pyx_v_cgrib = ((unsigned char (*))PyString_AsString(__pyx_v_gribmsg));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":334 */
  __pyx_1 = PyInt_FromLong(8); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 334; goto __pyx_L1;}
  __pyx_2 = PyNumber_Multiply(__pyx_v_ipos, __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 334; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  __pyx_v_iofst = ((long )PyInt_AsLong(__pyx_2));
  Py_DECREF(__pyx_2); __pyx_2 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":335 */
  __pyx_v_ierr = g2_unpack5(__pyx_v_cgrib,(&__pyx_v_iofst),(&__pyx_v_ndpts),(&__pyx_v_idrsnum),(&__pyx_v_idrstmpl),(&__pyx_v_mapdrslen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":336 */
  __pyx_3 = (__pyx_v_ierr != 0);
  if (__pyx_3) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":337 */
    __pyx_1 = PyInt_FromLong(__pyx_v_ierr); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 337; goto __pyx_L1;}
    __pyx_2 = PyNumber_Remainder(__pyx_k23p, __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 337; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_v_msg);
    __pyx_v_msg = __pyx_2;
    __pyx_2 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":338 */
    __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_RuntimeError); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 338; goto __pyx_L1;}
    __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 338; goto __pyx_L1;}
    Py_INCREF(__pyx_v_msg);
    PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_msg);
    __pyx_4 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 338; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    __Pyx_Raise(__pyx_4, 0, 0);
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 338; goto __pyx_L1;}
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":339 */
  __pyx_1 = PyInt_FromLong(__pyx_v_mapdrslen); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 339; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(2); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 339; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_1);
  Py_INCREF(__pyx_n_i);
  PyTuple_SET_ITEM(__pyx_2, 1, __pyx_n_i);
  __pyx_1 = 0;
  __pyx_4 = PyObject_CallObject(__pyx_v_zeros, __pyx_2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 339; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_v_drtmpl);
  __pyx_v_drtmpl = __pyx_4;
  __pyx_4 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":341 */
  PyObject_AsWriteBuffer(__pyx_v_drtmpl,(&__pyx_v_drtmpldat),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":342 */
  __pyx_v_drtmpldata = ((g2int (*))__pyx_v_drtmpldat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":344 */
  for (__pyx_5 = 0; __pyx_5 < __pyx_v_mapdrslen; ++__pyx_5) {
    __pyx_1 = PyInt_FromLong(__pyx_5); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 344; goto __pyx_L1;}
    Py_DECREF(__pyx_v_i);
    __pyx_v_i = __pyx_1;
    __pyx_1 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":345 */
    __pyx_3 = PyInt_AsLong(__pyx_v_i); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 345; goto __pyx_L1;}
    __pyx_6 = PyInt_AsLong(__pyx_v_i); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 345; goto __pyx_L1;}
    (__pyx_v_drtmpldata[__pyx_6]) = (__pyx_v_idrstmpl[__pyx_3]);
  }

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":346 */
  free(__pyx_v_idrstmpl);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":347 */
  __pyx_2 = PyInt_FromLong(__pyx_v_idrsnum); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 347; goto __pyx_L1;}
  __pyx_4 = PyInt_FromLong(__pyx_v_ndpts); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 347; goto __pyx_L1;}
  __pyx_1 = PyInt_FromLong((__pyx_v_iofst / 8)); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 347; goto __pyx_L1;}
  __pyx_7 = PyTuple_New(4); if (!__pyx_7) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 347; goto __pyx_L1;}
  Py_INCREF(__pyx_v_drtmpl);
  PyTuple_SET_ITEM(__pyx_7, 0, __pyx_v_drtmpl);
  PyTuple_SET_ITEM(__pyx_7, 1, __pyx_2);
  PyTuple_SET_ITEM(__pyx_7, 2, __pyx_4);
  PyTuple_SET_ITEM(__pyx_7, 3, __pyx_1);
  __pyx_2 = 0;
  __pyx_4 = 0;
  __pyx_1 = 0;
  __pyx_r = __pyx_7;
  __pyx_7 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_4);
  Py_XDECREF(__pyx_7);
  __Pyx_AddTraceback("g2lib.unpack5");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_msg);
  Py_DECREF(__pyx_v_drtmpl);
  Py_DECREF(__pyx_v_i);
  Py_DECREF(__pyx_v_gribmsg);
  Py_DECREF(__pyx_v_ipos);
  Py_DECREF(__pyx_v_zeros);
  return __pyx_r;
}

static PyObject *__pyx_k25p;

static char (__pyx_k25[]) = "Error unpacking section 6 - error code = %i";

static PyObject *__pyx_f_5g2lib_unpack6(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_5g2lib_unpack6[] = "\n Unpacks Section 6 (Bit-Map Section) as defined in GRIB Edition 2.\n\n bitmap = unpack6(gribmsg,ndpts,ipos)         \n\n INPUTS:\n   gribmsg  - String containing Section 6 of the GRIB2 message\n   ndpts    - Number of grid points specified in the bit-map (from\n              gds[1] returned by unpack3).\n   ipos     - Byte offset of the beginning of Section 6 in cgrib.\n   zeros   - Numeric/numpy array/scip.base zeros function (used to allocate\n            output python arrays).  Python is used to allocate the arrays\n            so no implementation-specific (Numeric, numpy array, scipy_core)\n            C API functions need to be used.  This means that any of these\n            array modules can be used simply by changing the import statement\n            in your python code.\n RETURNS:      \n   bmap     - numpy array array containing decoded bitmap. \n              ( if ibmap=0 ).  Otherwise None.\n   ibmap    - Bitmap indicator ( see Code Table 6.0 )\n              0 = bitmap applies and is included in Section 6.\n              1-253 = Predefined bitmap applies\n              254 = Previously defined bitmap applies to this field\n ERROR CODES: 2 = Not Section 6\n              4 = Unrecognized pre-defined bit-map.\n              6 = memory allocation error\n    ";
static PyObject *__pyx_f_5g2lib_unpack6(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_gribmsg = 0;
  PyObject *__pyx_v_ndpts = 0;
  PyObject *__pyx_v_ipos = 0;
  PyObject *__pyx_v_zeros = 0;
  unsigned char (*__pyx_v_cgrib);
  g2int __pyx_v_iofst;
  g2int __pyx_v_ierr;
  g2int __pyx_v_ngpts;
  g2int __pyx_v_ibmap;
  g2int (*__pyx_v_bmap);
  g2int (*__pyx_v_bitmapdata);
  void (*__pyx_v_bitmapdat);
  Py_ssize_t __pyx_v_buflen;
  PyObject *__pyx_v_msg;
  PyObject *__pyx_v_bitmap;
  PyObject *__pyx_v_i;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  int __pyx_3;
  PyObject *__pyx_4 = 0;
  long __pyx_5;
  int __pyx_6;
  static char *__pyx_argnames[] = {"gribmsg","ndpts","ipos","zeros",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "OOOO", __pyx_argnames, &__pyx_v_gribmsg, &__pyx_v_ndpts, &__pyx_v_ipos, &__pyx_v_zeros)) return 0;
  Py_INCREF(__pyx_v_gribmsg);
  Py_INCREF(__pyx_v_ndpts);
  Py_INCREF(__pyx_v_ipos);
  Py_INCREF(__pyx_v_zeros);
  __pyx_v_msg = Py_None; Py_INCREF(Py_None);
  __pyx_v_bitmap = Py_None; Py_INCREF(Py_None);
  __pyx_v_i = Py_None; Py_INCREF(Py_None);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":382 */
  __pyx_v_cgrib = ((unsigned char (*))PyString_AsString(__pyx_v_gribmsg));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":383 */
  __pyx_1 = PyInt_FromLong(8); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 383; goto __pyx_L1;}
  __pyx_2 = PyNumber_Multiply(__pyx_v_ipos, __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 383; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  __pyx_v_iofst = ((long )PyInt_AsLong(__pyx_2));
  Py_DECREF(__pyx_2); __pyx_2 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":384 */
  __pyx_v_ngpts = ((long )PyInt_AsLong(__pyx_v_ndpts));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":385 */
  __pyx_v_ierr = g2_unpack6(__pyx_v_cgrib,(&__pyx_v_iofst),__pyx_v_ngpts,(&__pyx_v_ibmap),(&__pyx_v_bmap));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":386 */
  __pyx_3 = (__pyx_v_ierr != 0);
  if (__pyx_3) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":387 */
    __pyx_1 = PyInt_FromLong(__pyx_v_ierr); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 387; goto __pyx_L1;}
    __pyx_2 = PyNumber_Remainder(__pyx_k25p, __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 387; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_v_msg);
    __pyx_v_msg = __pyx_2;
    __pyx_2 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":388 */
    __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_RuntimeError); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 388; goto __pyx_L1;}
    __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 388; goto __pyx_L1;}
    Py_INCREF(__pyx_v_msg);
    PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_msg);
    __pyx_4 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 388; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    __Pyx_Raise(__pyx_4, 0, 0);
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 388; goto __pyx_L1;}
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":389 */
  __pyx_3 = (__pyx_v_ibmap == 0);
  if (__pyx_3) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":390 */
    __pyx_1 = PyInt_FromLong(__pyx_v_ngpts); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 390; goto __pyx_L1;}
    __pyx_2 = PyTuple_New(2); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 390; goto __pyx_L1;}
    PyTuple_SET_ITEM(__pyx_2, 0, __pyx_1);
    Py_INCREF(__pyx_n_i);
    PyTuple_SET_ITEM(__pyx_2, 1, __pyx_n_i);
    __pyx_1 = 0;
    __pyx_4 = PyObject_CallObject(__pyx_v_zeros, __pyx_2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 390; goto __pyx_L1;}
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    Py_DECREF(__pyx_v_bitmap);
    __pyx_v_bitmap = __pyx_4;
    __pyx_4 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":392 */
    PyObject_AsWriteBuffer(__pyx_v_bitmap,(&__pyx_v_bitmapdat),(&__pyx_v_buflen));

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":393 */
    __pyx_v_bitmapdata = ((g2int (*))__pyx_v_bitmapdat);

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":395 */
    for (__pyx_5 = 0; __pyx_5 < __pyx_v_ngpts; ++__pyx_5) {
      __pyx_1 = PyInt_FromLong(__pyx_5); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 395; goto __pyx_L1;}
      Py_DECREF(__pyx_v_i);
      __pyx_v_i = __pyx_1;
      __pyx_1 = 0;

      /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":396 */
      __pyx_3 = PyInt_AsLong(__pyx_v_i); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 396; goto __pyx_L1;}
      __pyx_6 = PyInt_AsLong(__pyx_v_i); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 396; goto __pyx_L1;}
      (__pyx_v_bitmapdata[__pyx_6]) = (__pyx_v_bmap[__pyx_3]);
    }
    goto __pyx_L3;
  }
  /*else*/ {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":398 */
    Py_INCREF(Py_None);
    Py_DECREF(__pyx_v_bitmap);
    __pyx_v_bitmap = Py_None;
  }
  __pyx_L3:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":399 */
  free(__pyx_v_bmap);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":400 */
  __pyx_2 = PyInt_FromLong(__pyx_v_ibmap); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 400; goto __pyx_L1;}
  __pyx_4 = PyTuple_New(2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 400; goto __pyx_L1;}
  Py_INCREF(__pyx_v_bitmap);
  PyTuple_SET_ITEM(__pyx_4, 0, __pyx_v_bitmap);
  PyTuple_SET_ITEM(__pyx_4, 1, __pyx_2);
  __pyx_2 = 0;
  __pyx_r = __pyx_4;
  __pyx_4 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_4);
  __Pyx_AddTraceback("g2lib.unpack6");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_msg);
  Py_DECREF(__pyx_v_bitmap);
  Py_DECREF(__pyx_v_i);
  Py_DECREF(__pyx_v_gribmsg);
  Py_DECREF(__pyx_v_ndpts);
  Py_DECREF(__pyx_v_ipos);
  Py_DECREF(__pyx_v_zeros);
  return __pyx_r;
}

static PyObject *__pyx_n_order;
static PyObject *__pyx_n_int;
static PyObject *__pyx_n_ceil;
static PyObject *__pyx_n_log10;
static PyObject *__pyx_n_pow;
static PyObject *__pyx_n_repr;
static PyObject *__pyx_n_g;

static PyObject *__pyx_k27p;
static PyObject *__pyx_k30p;
static PyObject *__pyx_k32p;
static PyObject *__pyx_k33p;

static char (__pyx_k27[]) = "Error unpacking section 7 - error code = %i";
static char (__pyx_k30[]) = "%.";
static char (__pyx_k32[]) = "min/max=";
static char (__pyx_k33[]) = "/";

static PyObject *__pyx_f_5g2lib_unpack7(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_5g2lib_unpack7[] = "\n Unpacks Section 7 (Data Section) as defined in GRIB Edition 2.\n\n fld,fldmin,fldmax = unpack7(gribmsg,gdtnum,gdtmpl,drtnum,drtmpl,ndpts,ipos)\n INPUTS:\n   gribmsg  - String containing Section 7 of the GRIB2 message\n   gdtnum   - Grid Definition Template Number ( see Code Table 3.0)\n              ( Only used for DRS Template 5.51 )\n   gdtmpl   - numpy array containing the data values for\n              the specified Grid Definition\n              Template ( N=igdsnum ).  Each element of this integer\n              array contains an entry (in the order specified) of Grid\n              Definition Template 3.N\n              ( Only used for DRS Template 5.51 )\n   drtnum   - Data Representation Template Number ( see Code Table 5.0)\n   drtmpl   - numpy array containing the data values for\n              the specified Data Representation\n              Template ( N=idrsnum ).  Each element of this integer\n              array contains an entry (in the order specified) of Data\n              Representation Template 5.N\n   ndpts    - Number of data points unpacked and returned.\n   ipos     - Byte offset of the beginning of Section 7 in cgrib.\n   zeros   - Numeric/numpy array/scip.base zeros function (used to allocate\n            output python arrays).  Python is used to allocate the arrays\n            so no implementation-specific (Numeric, numpy array, scipy_core)\n            C API functions need to be used.  This means that any of these\n            array modules can be used simply by changing the import statement\n            in your python code.\n   storageorder - \'C\' for row-major, or \'F\' for column-major (Default \'C\')\n   printminmax - if True, min/max of fld is printed.\n\n RETURNS:      \n   fld      - numpy array (float32) containing the unpacked data field.\n\n ERROR CODES: 2 = Not section 7\n              4 = Unrecognized Data Representation Template\n              5 = need one of GDT 3.50 through 3.53 to decode DRT 5.51\n              6 = memory allocation error\n    ";
static PyObject *__pyx_f_5g2lib_unpack7(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_gribmsg = 0;
  PyObject *__pyx_v_gdtnum = 0;
  PyObject *__pyx_v_gdtmpl = 0;
  PyObject *__pyx_v_drtnum = 0;
  PyObject *__pyx_v_drtmpl = 0;
  PyObject *__pyx_v_ndpts = 0;
  PyObject *__pyx_v_ipos = 0;
  PyObject *__pyx_v_zeros = 0;
  PyObject *__pyx_v_printminmax = 0;
  PyObject *__pyx_v_storageorder = 0;
  unsigned char (*__pyx_v_cgrib);
  g2int __pyx_v_iofst;
  g2int __pyx_v_ierr;
  g2int __pyx_v_ngpts;
  g2int __pyx_v_idrsnum;
  g2int __pyx_v_igdsnum;
  g2int (*__pyx_v_igdstmpl);
  g2int (*__pyx_v_idrstmpl);
  g2float (*__pyx_v_fld);
  g2float (*__pyx_v_datadata);
  void (*__pyx_v_drtmpldat);
  void (*__pyx_v_gdtmpldat);
  void (*__pyx_v_datadat);
  float __pyx_v_rmin;
  float __pyx_v_rmax;
  int __pyx_v_n;
  Py_ssize_t __pyx_v_buflen;
  PyObject *__pyx_v_msg;
  PyObject *__pyx_v_data;
  PyObject *__pyx_v_i;
  PyObject *__pyx_v_fldmax;
  PyObject *__pyx_v_fldmin;
  PyObject *__pyx_v_bitsofprecision;
  PyObject *__pyx_v_digitsofprecision;
  PyObject *__pyx_v_format;
  PyObject *__pyx_v_minmaxstring;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  int __pyx_3;
  PyObject *__pyx_4 = 0;
  long __pyx_5;
  int __pyx_6;
  PyObject *__pyx_7 = 0;
  PyObject *__pyx_8 = 0;
  PyObject *__pyx_9 = 0;
  static char *__pyx_argnames[] = {"gribmsg","gdtnum","gdtmpl","drtnum","drtmpl","ndpts","ipos","zeros","printminmax","storageorder",0};
  __pyx_v_printminmax = __pyx_k2;
  __pyx_v_storageorder = __pyx_k4;
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "OOOOOOOO|OO", __pyx_argnames, &__pyx_v_gribmsg, &__pyx_v_gdtnum, &__pyx_v_gdtmpl, &__pyx_v_drtnum, &__pyx_v_drtmpl, &__pyx_v_ndpts, &__pyx_v_ipos, &__pyx_v_zeros, &__pyx_v_printminmax, &__pyx_v_storageorder)) return 0;
  Py_INCREF(__pyx_v_gribmsg);
  Py_INCREF(__pyx_v_gdtnum);
  Py_INCREF(__pyx_v_gdtmpl);
  Py_INCREF(__pyx_v_drtnum);
  Py_INCREF(__pyx_v_drtmpl);
  Py_INCREF(__pyx_v_ndpts);
  Py_INCREF(__pyx_v_ipos);
  Py_INCREF(__pyx_v_zeros);
  Py_INCREF(__pyx_v_printminmax);
  Py_INCREF(__pyx_v_storageorder);
  __pyx_v_msg = Py_None; Py_INCREF(Py_None);
  __pyx_v_data = Py_None; Py_INCREF(Py_None);
  __pyx_v_i = Py_None; Py_INCREF(Py_None);
  __pyx_v_fldmax = Py_None; Py_INCREF(Py_None);
  __pyx_v_fldmin = Py_None; Py_INCREF(Py_None);
  __pyx_v_bitsofprecision = Py_None; Py_INCREF(Py_None);
  __pyx_v_digitsofprecision = Py_None; Py_INCREF(Py_None);
  __pyx_v_format = Py_None; Py_INCREF(Py_None);
  __pyx_v_minmaxstring = Py_None; Py_INCREF(Py_None);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":450 */
  __pyx_v_cgrib = ((unsigned char (*))PyString_AsString(__pyx_v_gribmsg));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":451 */
  __pyx_1 = PyInt_FromLong(8); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 451; goto __pyx_L1;}
  __pyx_2 = PyNumber_Multiply(__pyx_v_ipos, __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 451; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  __pyx_v_iofst = ((long )PyInt_AsLong(__pyx_2));
  Py_DECREF(__pyx_2); __pyx_2 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":452 */
  __pyx_v_ngpts = ((long )PyInt_AsLong(__pyx_v_ndpts));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":453 */
  __pyx_v_idrsnum = ((long )PyInt_AsLong(__pyx_v_drtnum));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":454 */
  __pyx_v_igdsnum = ((long )PyInt_AsLong(__pyx_v_gdtnum));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":455 */
  PyObject_AsReadBuffer(__pyx_v_drtmpl,(&__pyx_v_drtmpldat),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":456 */
  PyObject_AsReadBuffer(__pyx_v_gdtmpl,(&__pyx_v_gdtmpldat),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":457 */
  __pyx_v_idrstmpl = ((g2int (*))__pyx_v_drtmpldat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":458 */
  __pyx_v_igdstmpl = ((g2int (*))__pyx_v_gdtmpldat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":459 */
  __pyx_v_ierr = g2_unpack7(__pyx_v_cgrib,(&__pyx_v_iofst),__pyx_v_igdsnum,__pyx_v_igdstmpl,__pyx_v_idrsnum,__pyx_v_idrstmpl,__pyx_v_ngpts,(&__pyx_v_fld));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":460 */
  __pyx_3 = (__pyx_v_ierr != 0);
  if (__pyx_3) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":461 */
    __pyx_1 = PyInt_FromLong(__pyx_v_ierr); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 461; goto __pyx_L1;}
    __pyx_2 = PyNumber_Remainder(__pyx_k27p, __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 461; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_v_msg);
    __pyx_v_msg = __pyx_2;
    __pyx_2 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":462 */
    __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_RuntimeError); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 462; goto __pyx_L1;}
    __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 462; goto __pyx_L1;}
    Py_INCREF(__pyx_v_msg);
    PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_msg);
    __pyx_4 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 462; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    __Pyx_Raise(__pyx_4, 0, 0);
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 462; goto __pyx_L1;}
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":463 */
  __pyx_1 = PyInt_FromLong(__pyx_v_ngpts); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 463; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(2); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 463; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_1);
  Py_INCREF(__pyx_n_f);
  PyTuple_SET_ITEM(__pyx_2, 1, __pyx_n_f);
  __pyx_1 = 0;
  __pyx_4 = PyDict_New(); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 463; goto __pyx_L1;}
  if (PyDict_SetItem(__pyx_4, __pyx_n_order, __pyx_v_storageorder) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 463; goto __pyx_L1;}
  __pyx_1 = PyEval_CallObjectWithKeywords(__pyx_v_zeros, __pyx_2, __pyx_4); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 463; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_4); __pyx_4 = 0;
  Py_DECREF(__pyx_v_data);
  __pyx_v_data = __pyx_1;
  __pyx_1 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":465 */
  PyObject_AsWriteBuffer(__pyx_v_data,(&__pyx_v_datadat),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":466 */
  __pyx_v_datadata = ((g2float (*))__pyx_v_datadat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":468 */
  for (__pyx_5 = 0; __pyx_5 < __pyx_v_ngpts; ++__pyx_5) {
    __pyx_2 = PyInt_FromLong(__pyx_5); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 468; goto __pyx_L1;}
    Py_DECREF(__pyx_v_i);
    __pyx_v_i = __pyx_2;
    __pyx_2 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":469 */
    __pyx_3 = PyInt_AsLong(__pyx_v_i); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 469; goto __pyx_L1;}
    __pyx_6 = PyInt_AsLong(__pyx_v_i); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 469; goto __pyx_L1;}
    (__pyx_v_datadata[__pyx_6]) = (__pyx_v_fld[__pyx_3]);
  }

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":470 */
  __pyx_3 = PyObject_IsTrue(__pyx_v_printminmax); if (__pyx_3 < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 470; goto __pyx_L1;}
  if (__pyx_3) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":471 */
    __pyx_v_rmax = (-((float )9.9e31));

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":472 */
    __pyx_v_rmin = ((float )9.9e31);

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":473 */
    __pyx_5 = PyInt_AsLong(__pyx_v_ndpts); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 473; goto __pyx_L1;}
    for (__pyx_v_n = 0; __pyx_v_n < __pyx_5; ++__pyx_v_n) {

      /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":474 */
      __pyx_6 = ((__pyx_v_fld[__pyx_v_n]) > __pyx_v_rmax);
      if (__pyx_6) {
        __pyx_v_rmax = (__pyx_v_fld[__pyx_v_n]);
        goto __pyx_L8;
      }
      __pyx_L8:;

      /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":475 */
      __pyx_3 = ((__pyx_v_fld[__pyx_v_n]) < __pyx_v_rmin);
      if (__pyx_3) {
        __pyx_v_rmin = (__pyx_v_fld[__pyx_v_n]);
        goto __pyx_L9;
      }
      __pyx_L9:;
    }

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":476 */
    __pyx_4 = PyFloat_FromDouble(__pyx_v_rmax); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 476; goto __pyx_L1;}
    Py_DECREF(__pyx_v_fldmax);
    __pyx_v_fldmax = __pyx_4;
    __pyx_4 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":477 */
    __pyx_1 = PyFloat_FromDouble(__pyx_v_rmin); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 477; goto __pyx_L1;}
    Py_DECREF(__pyx_v_fldmin);
    __pyx_v_fldmin = __pyx_1;
    __pyx_1 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":478 */
    __pyx_2 = PyInt_FromLong(3); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 478; goto __pyx_L1;}
    __pyx_4 = PyObject_GetItem(__pyx_v_drtmpl, __pyx_2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 478; goto __pyx_L1;}
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    Py_DECREF(__pyx_v_bitsofprecision);
    __pyx_v_bitsofprecision = __pyx_4;
    __pyx_4 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":479 */
    __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_int); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 479; goto __pyx_L1;}
    __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_math); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 479; goto __pyx_L1;}
    __pyx_4 = PyObject_GetAttr(__pyx_2, __pyx_n_ceil); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 479; goto __pyx_L1;}
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_math); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 479; goto __pyx_L1;}
    __pyx_7 = PyObject_GetAttr(__pyx_2, __pyx_n_log10); if (!__pyx_7) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 479; goto __pyx_L1;}
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_math); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 479; goto __pyx_L1;}
    __pyx_8 = PyObject_GetAttr(__pyx_2, __pyx_n_pow); if (!__pyx_8) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 479; goto __pyx_L1;}
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    __pyx_2 = PyInt_FromLong(2); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 479; goto __pyx_L1;}
    __pyx_9 = PyTuple_New(2); if (!__pyx_9) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 479; goto __pyx_L1;}
    PyTuple_SET_ITEM(__pyx_9, 0, __pyx_2);
    Py_INCREF(__pyx_v_bitsofprecision);
    PyTuple_SET_ITEM(__pyx_9, 1, __pyx_v_bitsofprecision);
    __pyx_2 = 0;
    __pyx_2 = PyObject_CallObject(__pyx_8, __pyx_9); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 479; goto __pyx_L1;}
    Py_DECREF(__pyx_8); __pyx_8 = 0;
    Py_DECREF(__pyx_9); __pyx_9 = 0;
    __pyx_8 = PyTuple_New(1); if (!__pyx_8) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 479; goto __pyx_L1;}
    PyTuple_SET_ITEM(__pyx_8, 0, __pyx_2);
    __pyx_2 = 0;
    __pyx_9 = PyObject_CallObject(__pyx_7, __pyx_8); if (!__pyx_9) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 479; goto __pyx_L1;}
    Py_DECREF(__pyx_7); __pyx_7 = 0;
    Py_DECREF(__pyx_8); __pyx_8 = 0;
    __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 479; goto __pyx_L1;}
    PyTuple_SET_ITEM(__pyx_2, 0, __pyx_9);
    __pyx_9 = 0;
    __pyx_7 = PyObject_CallObject(__pyx_4, __pyx_2); if (!__pyx_7) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 479; goto __pyx_L1;}
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    __pyx_8 = PyTuple_New(1); if (!__pyx_8) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 479; goto __pyx_L1;}
    PyTuple_SET_ITEM(__pyx_8, 0, __pyx_7);
    __pyx_7 = 0;
    __pyx_9 = PyObject_CallObject(__pyx_1, __pyx_8); if (!__pyx_9) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 479; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_8); __pyx_8 = 0;
    Py_DECREF(__pyx_v_digitsofprecision);
    __pyx_v_digitsofprecision = __pyx_9;
    __pyx_9 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":480 */
    __pyx_4 = __Pyx_GetName(__pyx_b, __pyx_n_repr); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 480; goto __pyx_L1;}
    __pyx_2 = PyInt_FromLong(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 480; goto __pyx_L1;}
    __pyx_7 = PyNumber_Add(__pyx_v_digitsofprecision, __pyx_2); if (!__pyx_7) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 480; goto __pyx_L1;}
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    __pyx_1 = PyTuple_New(1); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 480; goto __pyx_L1;}
    PyTuple_SET_ITEM(__pyx_1, 0, __pyx_7);
    __pyx_7 = 0;
    __pyx_8 = PyObject_CallObject(__pyx_4, __pyx_1); if (!__pyx_8) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 480; goto __pyx_L1;}
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    __pyx_9 = PyNumber_Add(__pyx_k30p, __pyx_8); if (!__pyx_9) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 480; goto __pyx_L1;}
    Py_DECREF(__pyx_8); __pyx_8 = 0;
    __pyx_2 = PyNumber_Add(__pyx_9, __pyx_n_g); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 480; goto __pyx_L1;}
    Py_DECREF(__pyx_9); __pyx_9 = 0;
    Py_DECREF(__pyx_v_format);
    __pyx_v_format = __pyx_2;
    __pyx_2 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":481 */
    __pyx_7 = PyNumber_Add(__pyx_k32p, __pyx_v_format); if (!__pyx_7) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 481; goto __pyx_L1;}
    __pyx_4 = PyNumber_Add(__pyx_7, __pyx_k33p); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 481; goto __pyx_L1;}
    Py_DECREF(__pyx_7); __pyx_7 = 0;
    __pyx_1 = PyNumber_Add(__pyx_4, __pyx_v_format); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 481; goto __pyx_L1;}
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    Py_DECREF(__pyx_v_minmaxstring);
    __pyx_v_minmaxstring = __pyx_1;
    __pyx_1 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":482 */
    __pyx_8 = PyTuple_New(2); if (!__pyx_8) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 482; goto __pyx_L1;}
    Py_INCREF(__pyx_v_fldmin);
    PyTuple_SET_ITEM(__pyx_8, 0, __pyx_v_fldmin);
    Py_INCREF(__pyx_v_fldmax);
    PyTuple_SET_ITEM(__pyx_8, 1, __pyx_v_fldmax);
    __pyx_9 = PyNumber_Remainder(__pyx_v_minmaxstring, __pyx_8); if (!__pyx_9) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 482; goto __pyx_L1;}
    Py_DECREF(__pyx_8); __pyx_8 = 0;
    Py_DECREF(__pyx_v_minmaxstring);
    __pyx_v_minmaxstring = __pyx_9;
    __pyx_9 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":483 */
    if (__Pyx_PrintItem(__pyx_v_minmaxstring) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 483; goto __pyx_L1;}
    if (__Pyx_PrintNewline() < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 483; goto __pyx_L1;}
    goto __pyx_L5;
  }
  __pyx_L5:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":484 */
  free(__pyx_v_fld);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":485 */
  Py_INCREF(__pyx_v_data);
  __pyx_r = __pyx_v_data;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_4);
  Py_XDECREF(__pyx_7);
  Py_XDECREF(__pyx_8);
  Py_XDECREF(__pyx_9);
  __Pyx_AddTraceback("g2lib.unpack7");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_msg);
  Py_DECREF(__pyx_v_data);
  Py_DECREF(__pyx_v_i);
  Py_DECREF(__pyx_v_fldmax);
  Py_DECREF(__pyx_v_fldmin);
  Py_DECREF(__pyx_v_bitsofprecision);
  Py_DECREF(__pyx_v_digitsofprecision);
  Py_DECREF(__pyx_v_format);
  Py_DECREF(__pyx_v_minmaxstring);
  Py_DECREF(__pyx_v_gribmsg);
  Py_DECREF(__pyx_v_gdtnum);
  Py_DECREF(__pyx_v_gdtmpl);
  Py_DECREF(__pyx_v_drtnum);
  Py_DECREF(__pyx_v_drtmpl);
  Py_DECREF(__pyx_v_ndpts);
  Py_DECREF(__pyx_v_ipos);
  Py_DECREF(__pyx_v_zeros);
  Py_DECREF(__pyx_v_printminmax);
  Py_DECREF(__pyx_v_storageorder);
  return __pyx_r;
}

static PyObject *__pyx_n_len;

static PyObject *__pyx_k34p;
static PyObject *__pyx_k35p;

static char (__pyx_k34[]) = " ";
static char (__pyx_k35[]) = "Error in grib2_create, error code = %i";

static PyObject *__pyx_f_5g2lib_grib2_create(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_5g2lib_grib2_create[] = "\n Initializes a new GRIB2 message and packs\n GRIB2 sections 0 (Indicator Section) and 1 (Identification Section).\n This routine is used with routines \"g2_addgrid\", \n \"grib2_addfield\", and \"grib2_gribend\" to create a complete GRIB2 message.  \n grib2_create must be called first to initialize a new GRIB2 message.\n Also, a call to grib2_gribend is required to complete GRIB2 message\n after all fields have been added.\n\n gribmsg, ierr = grib2_create(listsec0, listsec1)\n\n   INPUT ARGUMENTS:\n     \n     listsec0 - numpy array containing info needed for GRIB Indicator Section 0.\n                Must have length >= 2.\n                listsec0[0]=Discipline-GRIB Master Table Number\n                            (see Code Table 0.0)\n                listsec0[1]=GRIB Edition Number (currently 2)\n     listsec1 - numpy array containing info needed for GRIB Identification Section 1.\n                Must have len >= 13.\n                listsec1[0]=Id of orginating centre (Common Code Table C-1)\n                listsec1[1]=Id of orginating sub-centre (local table)\n                listsec1[2]=GRIB Master Tables Version Number (Code Table 1.0)\n                listsec1[3]=GRIB Local Tables Version Number (Code Table 1.1)\n                listsec1[4]=Significance of Reference Time (Code Table 1.2)\n                listsec1[5]=Reference Time - Year (4 digits)\n                listsec1[6]=Reference Time - Month\n                listsec1[7]=Reference Time - Day\n                listsec1[8]=Reference Time - Hour\n                listsec1[9]=Reference Time - Minute\n                listsec1[10]=Reference Time - Second\n                listsec1[11]=Production status of data (Code Table 1.3)\n                listsec1[12]=Type of processed data (Code Table 1.4)\n\n   OUTPUT ARGUMENTS:      \n     gribmsg  - string containing the new GRIB2 message.\n     ierr     - return code.\n              > 0 = Current size of new GRIB2 message\n               -1 = Tried to use for version other than GRIB Edition 2\n    ";
static PyObject *__pyx_f_5g2lib_grib2_create(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_listsec0 = 0;
  PyObject *__pyx_v_listsec1 = 0;
  g2int (*__pyx_v_isec0);
  g2int (*__pyx_v_isec1);
  g2int __pyx_v_ierr;
  void (*__pyx_v_listsec0dat);
  void (*__pyx_v_listsec1dat);
  Py_ssize_t __pyx_v_buflen;
  unsigned char (*__pyx_v_cgrib);
  PyObject *__pyx_v_lgrib;
  PyObject *__pyx_v_gribmsg;
  PyObject *__pyx_v_msg;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  PyObject *__pyx_4 = 0;
  PyObject *__pyx_5 = 0;
  int __pyx_6;
  static char *__pyx_argnames[] = {"listsec0","listsec1",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "OO", __pyx_argnames, &__pyx_v_listsec0, &__pyx_v_listsec1)) return 0;
  Py_INCREF(__pyx_v_listsec0);
  Py_INCREF(__pyx_v_listsec1);
  __pyx_v_lgrib = Py_None; Py_INCREF(Py_None);
  __pyx_v_gribmsg = Py_None; Py_INCREF(Py_None);
  __pyx_v_msg = Py_None; Py_INCREF(Py_None);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":535 */
  __pyx_1 = PyInt_FromLong(4); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 535; goto __pyx_L1;}
  __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_len); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 535; goto __pyx_L1;}
  __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 535; goto __pyx_L1;}
  Py_INCREF(__pyx_v_listsec0);
  PyTuple_SET_ITEM(__pyx_3, 0, __pyx_v_listsec0);
  __pyx_4 = PyObject_CallObject(__pyx_2, __pyx_3); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 535; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_len); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 535; goto __pyx_L1;}
  __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 535; goto __pyx_L1;}
  Py_INCREF(__pyx_v_listsec1);
  PyTuple_SET_ITEM(__pyx_3, 0, __pyx_v_listsec1);
  __pyx_5 = PyObject_CallObject(__pyx_2, __pyx_3); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 535; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  __pyx_2 = PyNumber_Add(__pyx_4, __pyx_5); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 535; goto __pyx_L1;}
  Py_DECREF(__pyx_4); __pyx_4 = 0;
  Py_DECREF(__pyx_5); __pyx_5 = 0;
  __pyx_3 = PyNumber_Multiply(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 535; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_v_lgrib);
  __pyx_v_lgrib = __pyx_3;
  __pyx_3 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":536 */
  __pyx_4 = PyNumber_Multiply(__pyx_v_lgrib, __pyx_k34p); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 536; goto __pyx_L1;}
  Py_DECREF(__pyx_v_gribmsg);
  __pyx_v_gribmsg = __pyx_4;
  __pyx_4 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":537 */
  __pyx_v_cgrib = ((unsigned char (*))PyString_AsString(__pyx_v_gribmsg));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":538 */
  PyObject_AsReadBuffer(__pyx_v_listsec0,(&__pyx_v_listsec0dat),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":539 */
  PyObject_AsReadBuffer(__pyx_v_listsec1,(&__pyx_v_listsec1dat),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":540 */
  __pyx_v_isec0 = ((g2int (*))__pyx_v_listsec0dat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":541 */
  __pyx_v_isec1 = ((g2int (*))__pyx_v_listsec1dat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":542 */
  __pyx_v_ierr = g2_create(__pyx_v_cgrib,__pyx_v_isec0,__pyx_v_isec1);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":543 */
  __pyx_6 = (__pyx_v_ierr < 0);
  if (__pyx_6) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":544 */
    __pyx_5 = PyInt_FromLong(__pyx_v_ierr); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 544; goto __pyx_L1;}
    __pyx_1 = PyNumber_Remainder(__pyx_k35p, __pyx_5); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 544; goto __pyx_L1;}
    Py_DECREF(__pyx_5); __pyx_5 = 0;
    Py_DECREF(__pyx_v_msg);
    __pyx_v_msg = __pyx_1;
    __pyx_1 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":545 */
    __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_RuntimeError); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 545; goto __pyx_L1;}
    __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 545; goto __pyx_L1;}
    Py_INCREF(__pyx_v_msg);
    PyTuple_SET_ITEM(__pyx_3, 0, __pyx_v_msg);
    __pyx_4 = PyObject_CallObject(__pyx_2, __pyx_3); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 545; goto __pyx_L1;}
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    Py_DECREF(__pyx_3); __pyx_3 = 0;
    __Pyx_Raise(__pyx_4, 0, 0);
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 545; goto __pyx_L1;}
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":546 */
  __pyx_5 = PyString_FromStringAndSize(((char (*))__pyx_v_cgrib),__pyx_v_ierr); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 546; goto __pyx_L1;}
  Py_DECREF(__pyx_v_gribmsg);
  __pyx_v_gribmsg = __pyx_5;
  __pyx_5 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":547 */
  __pyx_1 = PyInt_FromLong(__pyx_v_ierr); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 547; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(2); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 547; goto __pyx_L1;}
  Py_INCREF(__pyx_v_gribmsg);
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_gribmsg);
  PyTuple_SET_ITEM(__pyx_2, 1, __pyx_1);
  __pyx_1 = 0;
  __pyx_r = __pyx_2;
  __pyx_2 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  Py_XDECREF(__pyx_4);
  Py_XDECREF(__pyx_5);
  __Pyx_AddTraceback("g2lib.grib2_create");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_lgrib);
  Py_DECREF(__pyx_v_gribmsg);
  Py_DECREF(__pyx_v_msg);
  Py_DECREF(__pyx_v_listsec0);
  Py_DECREF(__pyx_v_listsec1);
  return __pyx_r;
}

static PyObject *__pyx_k36p;
static PyObject *__pyx_k37p;

static char (__pyx_k36[]) = "        ";
static char (__pyx_k37[]) = "error in grib2_end, error code = %i";

static PyObject *__pyx_f_5g2lib_grib2_end(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_5g2lib_grib2_end[] = "\n\n    Finalizes a GRIB2 message after all grids\n    and fields have been added.  It adds the End Section ( \"7777\" )\n    to the end of the GRIB message and calculates the length and stores\n    it in the appropriate place in Section 0.\n    This routine is used with routines \"g2_create\",  \n    \"g2_addgrid\", and \"g2_addfield\" to create a complete GRIB2 message.\n    g2_create must be called first to initialize a new GRIB2 message.\n\n  gribmsg, ierr = grib2_end(gribmsg)\n  \n    INPUT ARGUMENT:\n      gribmsg  - String containing all the data sections added\n                 be previous calls to g2_create, g2_addgrid,\n                 and g2_addfield.\n\n    OUTPUT ARGUMENTS:      \n      gribmsg  - String containing the finalized GRIB2 message\n\n    RETURN VALUES:\n      ierr     - Return code.\n               > 0 = Length of the final GRIB2 message in bytes.\n                -1 = GRIB message was not initialized.  Need to call\n                     routine g2_create first.\n                -2 = GRIB message already complete.  \n                -3 = Sum of Section byte counts doesn\'t add to total byte count\n                -4 = Previous Section was not 7.\n    ";
static PyObject *__pyx_f_5g2lib_grib2_end(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_gribmsg = 0;
  g2int __pyx_v_ierr;
  unsigned char (*__pyx_v_cgrib);
  PyObject *__pyx_v_msg;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  int __pyx_2;
  PyObject *__pyx_3 = 0;
  PyObject *__pyx_4 = 0;
  static char *__pyx_argnames[] = {"gribmsg",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "O", __pyx_argnames, &__pyx_v_gribmsg)) return 0;
  Py_INCREF(__pyx_v_gribmsg);
  __pyx_v_msg = Py_None; Py_INCREF(Py_None);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":582 */
  __pyx_1 = PyNumber_Add(__pyx_v_gribmsg, __pyx_k36p); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 582; goto __pyx_L1;}
  Py_DECREF(__pyx_v_gribmsg);
  __pyx_v_gribmsg = __pyx_1;
  __pyx_1 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":583 */
  __pyx_v_cgrib = ((unsigned char (*))PyString_AsString(__pyx_v_gribmsg));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":584 */
  __pyx_v_ierr = g2_gribend(__pyx_v_cgrib);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":585 */
  __pyx_2 = (__pyx_v_ierr < 0);
  if (__pyx_2) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":586 */
    __pyx_1 = PyInt_FromLong(__pyx_v_ierr); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 586; goto __pyx_L1;}
    __pyx_3 = PyNumber_Remainder(__pyx_k37p, __pyx_1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 586; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_v_msg);
    __pyx_v_msg = __pyx_3;
    __pyx_3 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":587 */
    __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_RuntimeError); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 587; goto __pyx_L1;}
    __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 587; goto __pyx_L1;}
    Py_INCREF(__pyx_v_msg);
    PyTuple_SET_ITEM(__pyx_3, 0, __pyx_v_msg);
    __pyx_4 = PyObject_CallObject(__pyx_1, __pyx_3); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 587; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_3); __pyx_3 = 0;
    __Pyx_Raise(__pyx_4, 0, 0);
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 587; goto __pyx_L1;}
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":588 */
  __pyx_1 = PyString_FromStringAndSize(((char (*))__pyx_v_cgrib),__pyx_v_ierr); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 588; goto __pyx_L1;}
  Py_DECREF(__pyx_v_gribmsg);
  __pyx_v_gribmsg = __pyx_1;
  __pyx_1 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":589 */
  __pyx_3 = PyInt_FromLong(__pyx_v_ierr); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 589; goto __pyx_L1;}
  __pyx_4 = PyTuple_New(2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 589; goto __pyx_L1;}
  Py_INCREF(__pyx_v_gribmsg);
  PyTuple_SET_ITEM(__pyx_4, 0, __pyx_v_gribmsg);
  PyTuple_SET_ITEM(__pyx_4, 1, __pyx_3);
  __pyx_3 = 0;
  __pyx_r = __pyx_4;
  __pyx_4 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_3);
  Py_XDECREF(__pyx_4);
  __Pyx_AddTraceback("g2lib.grib2_end");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_msg);
  Py_DECREF(__pyx_v_gribmsg);
  return __pyx_r;
}

static PyObject *__pyx_k38p;
static PyObject *__pyx_k39p;

static char (__pyx_k38[]) = " ";
static char (__pyx_k39[]) = "error in grib2_addgrid, error code = %i";

static PyObject *__pyx_f_5g2lib_grib2_addgrid(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_5g2lib_grib2_addgrid[] = "\n   Packs up a Grid Definition Section (Section 3) \n   and adds it to a GRIB2 message.  It is used with routines \"g2_create\",\n   \"g2_addfield\" and \"g2_gribend\" to create a complete GRIB2 message.\n   g2_create must be called first to initialize a new GRIB2 message.\n\n   gribmsg, ierr = grib2_addgrid(gribmsg,gds,gdstmpl,ideflist)\n \n   INPUT ARGUMENTS:\n     cgrib    - Char array that contains the GRIB2 message to which\n                section should be added.\n     gds      - Contains information needed for GRIB Grid Definition Section 3\n                Must be dimensioned >= 5.\n                gds[0]=Source of grid definition (see Code Table 3.0)\n                gds[1]=Number of grid points in the defined grid.\n                gds[2]=Number of octets needed for each \n                            additional grid points definition.  \n                            Used to define number of\n                            points in each row ( or column ) for\n                            non-regular grids.  \n                            = 0, if using regular grid.\n                gds[3]=Interpretation of list for optional points \n                            definition.  (Code Table 3.11)\n                gds[4]=Grid Definition Template Number (Code Table 3.1)\n     gdstmpl  - Contains the data values for the specified Grid Definition\n                Template ( NN=gds[4] ).  Each element of this integer \n                array contains an entry (in the order specified) of Grid\n                Defintion Template 3.NN\n     deflist  - (Used if gds[2] != 0)  This array contains the\n                number of grid points contained in each row ( or column )\n\n   OUTPUT ARGUMENTS:      \n     cgrib    - Char array to contain the updated GRIB2 message.\n                Must be allocated large enough to store the entire\n                GRIB2 message.\n\n   RETURN VALUES:\n     ierr     - Return code.\n              > 0 = Current size of updated GRIB2 message\n               -1 = GRIB message was not initialized.  Need to call\n                    routine gribcreate first.\n               -2 = GRIB message already complete.  Cannot add new section.\n               -3 = Sum of Section byte counts doesn\'t add to total byte count\n               -4 = Previous Section was not 1, 2 or 7.\n               -5 = Could not find requested Grid Definition Template.\n    ";
static PyObject *__pyx_f_5g2lib_grib2_addgrid(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_gribmsg = 0;
  PyObject *__pyx_v_gds = 0;
  PyObject *__pyx_v_gdstmpl = 0;
  PyObject *__pyx_v_deflist = 0;
  PyObject *__pyx_v_defnum = 0;
  g2int __pyx_v_ierr;
  g2int __pyx_v_idefnum;
  g2int (*__pyx_v_igds);
  g2int (*__pyx_v_igdstmpl);
  g2int (*__pyx_v_ideflist);
  unsigned char (*__pyx_v_cgrib);
  void (*__pyx_v_gdsdat);
  void (*__pyx_v_deflistdat);
  void (*__pyx_v_gdstmpldat);
  Py_ssize_t __pyx_v_buflen;
  PyObject *__pyx_v_msg;
  PyObject *__pyx_r;
  int __pyx_1;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  PyObject *__pyx_4 = 0;
  PyObject *__pyx_5 = 0;
  static char *__pyx_argnames[] = {"gribmsg","gds","gdstmpl","deflist","defnum",0};
  __pyx_v_deflist = __pyx_k5;
  __pyx_v_defnum = __pyx_k6;
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "OOO|OO", __pyx_argnames, &__pyx_v_gribmsg, &__pyx_v_gds, &__pyx_v_gdstmpl, &__pyx_v_deflist, &__pyx_v_defnum)) return 0;
  Py_INCREF(__pyx_v_gribmsg);
  Py_INCREF(__pyx_v_gds);
  Py_INCREF(__pyx_v_gdstmpl);
  Py_INCREF(__pyx_v_deflist);
  Py_INCREF(__pyx_v_defnum);
  __pyx_v_msg = Py_None; Py_INCREF(Py_None);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":642 */
  PyObject_AsReadBuffer(__pyx_v_gds,(&__pyx_v_gdsdat),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":643 */
  PyObject_AsReadBuffer(__pyx_v_gdstmpl,(&__pyx_v_gdstmpldat),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":644 */
  __pyx_v_igds = ((g2int (*))__pyx_v_gdsdat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":645 */
  __pyx_v_igdstmpl = ((g2int (*))__pyx_v_gdstmpldat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":646 */
  __pyx_1 = ((__pyx_v_igds[2]) != 0);
  if (__pyx_1) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":647 */
    PyObject_AsReadBuffer(__pyx_v_deflist,(&__pyx_v_deflistdat),(&__pyx_v_buflen));

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":648 */
    __pyx_v_ideflist = ((g2int (*))__pyx_v_deflistdat);

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":649 */
    __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_len); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 649; goto __pyx_L1;}
    __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 649; goto __pyx_L1;}
    Py_INCREF(__pyx_v_deflist);
    PyTuple_SET_ITEM(__pyx_3, 0, __pyx_v_deflist);
    __pyx_4 = PyObject_CallObject(__pyx_2, __pyx_3); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 649; goto __pyx_L1;}
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    Py_DECREF(__pyx_3); __pyx_3 = 0;
    __pyx_v_idefnum = ((long )PyInt_AsLong(__pyx_4));
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    goto __pyx_L2;
  }
  /*else*/ {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":651 */
    __pyx_v_ideflist = NULL;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":652 */
    __pyx_v_idefnum = 0;
  }
  __pyx_L2:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":653 */
  __pyx_2 = PyInt_FromLong(4); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 653; goto __pyx_L1;}
  __pyx_3 = PyInt_FromLong((256 + 4)); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 653; goto __pyx_L1;}
  __pyx_4 = PyInt_FromLong(2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 653; goto __pyx_L1;}
  __pyx_5 = PyObject_GetItem(__pyx_v_gds, __pyx_4); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 653; goto __pyx_L1;}
  Py_DECREF(__pyx_4); __pyx_4 = 0;
  __pyx_4 = PyNumber_Add(__pyx_3, __pyx_5); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 653; goto __pyx_L1;}
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  Py_DECREF(__pyx_5); __pyx_5 = 0;
  __pyx_3 = PyInt_FromLong(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 653; goto __pyx_L1;}
  __pyx_5 = PyNumber_Add(__pyx_4, __pyx_3); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 653; goto __pyx_L1;}
  Py_DECREF(__pyx_4); __pyx_4 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  __pyx_4 = PyNumber_Multiply(__pyx_2, __pyx_5); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 653; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_5); __pyx_5 = 0;
  __pyx_3 = PyNumber_Multiply(__pyx_4, __pyx_k38p); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 653; goto __pyx_L1;}
  Py_DECREF(__pyx_4); __pyx_4 = 0;
  __pyx_2 = PyNumber_Add(__pyx_v_gribmsg, __pyx_3); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 653; goto __pyx_L1;}
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  Py_DECREF(__pyx_v_gribmsg);
  __pyx_v_gribmsg = __pyx_2;
  __pyx_2 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":654 */
  __pyx_v_cgrib = ((unsigned char (*))PyString_AsString(__pyx_v_gribmsg));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":655 */
  __pyx_v_ierr = g2_addgrid(__pyx_v_cgrib,__pyx_v_igds,__pyx_v_igdstmpl,__pyx_v_ideflist,__pyx_v_idefnum);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":656 */
  __pyx_1 = (__pyx_v_ierr < 0);
  if (__pyx_1) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":657 */
    __pyx_5 = PyInt_FromLong(__pyx_v_ierr); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 657; goto __pyx_L1;}
    __pyx_4 = PyNumber_Remainder(__pyx_k39p, __pyx_5); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 657; goto __pyx_L1;}
    Py_DECREF(__pyx_5); __pyx_5 = 0;
    Py_DECREF(__pyx_v_msg);
    __pyx_v_msg = __pyx_4;
    __pyx_4 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":658 */
    __pyx_3 = __Pyx_GetName(__pyx_b, __pyx_n_RuntimeError); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 658; goto __pyx_L1;}
    __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 658; goto __pyx_L1;}
    Py_INCREF(__pyx_v_msg);
    PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_msg);
    __pyx_5 = PyObject_CallObject(__pyx_3, __pyx_2); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 658; goto __pyx_L1;}
    Py_DECREF(__pyx_3); __pyx_3 = 0;
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    __Pyx_Raise(__pyx_5, 0, 0);
    Py_DECREF(__pyx_5); __pyx_5 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 658; goto __pyx_L1;}
    goto __pyx_L3;
  }
  __pyx_L3:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":659 */
  __pyx_4 = PyString_FromStringAndSize(((char (*))__pyx_v_cgrib),__pyx_v_ierr); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 659; goto __pyx_L1;}
  Py_DECREF(__pyx_v_gribmsg);
  __pyx_v_gribmsg = __pyx_4;
  __pyx_4 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":660 */
  __pyx_3 = PyInt_FromLong(__pyx_v_ierr); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 660; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(2); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 660; goto __pyx_L1;}
  Py_INCREF(__pyx_v_gribmsg);
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_gribmsg);
  PyTuple_SET_ITEM(__pyx_2, 1, __pyx_3);
  __pyx_3 = 0;
  __pyx_r = __pyx_2;
  __pyx_2 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  Py_XDECREF(__pyx_4);
  Py_XDECREF(__pyx_5);
  __Pyx_AddTraceback("g2lib.grib2_addgrid");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_msg);
  Py_DECREF(__pyx_v_gribmsg);
  Py_DECREF(__pyx_v_gds);
  Py_DECREF(__pyx_v_gdstmpl);
  Py_DECREF(__pyx_v_deflist);
  Py_DECREF(__pyx_v_defnum);
  return __pyx_r;
}

static PyObject *__pyx_k40p;
static PyObject *__pyx_k41p;

static char (__pyx_k40[]) = " ";
static char (__pyx_k41[]) = "error in grib2_addfield, error code = %i";

static PyObject *__pyx_f_5g2lib_grib2_addfield(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_5g2lib_grib2_addfield[] = "\n   Packs up Sections 4 through 7 for a given field\n   and adds them to a GRIB2 message.  They are Product Definition Section,\n   Data Representation Section, Bit-Map Section and Data Section, respectively.\n   This routine is used with routines \"g2_create\",  \n   \"g2_addgrid\", and \"g2_gribend\" to create a complete GRIB2 message.  \n   g2_create must be called first to initialize a new GRIB2 message.\n   g2_addgrid must be called after g2_create and\n   before this routine to add the appropriate grid description to\n   the GRIB2 message. A call to g2_gribend is required to complete \n   GRIB2 message after all fields have been added.\n\n   gribmsg, ierr = g2_addfield(gribmsg,pdsnum,pdstmpl,coordlist,drsnum,\n                               drstmpl,fld,ngrdpts,ibmap,bmap)\n   INPUT ARGUMENT LIST:\n     cgrib    - Char array that contains the GRIB2 message to which sections\n                4 through 7 should be added.\n     pdsnum   - Product Definition Template Number ( see Code Table 4.0)\n     pdstmpl  - numpy array with data values for the specified Product Definition\n                Template ( N=pdsnum ).  Each element of this integer \n                array contains an entry (in the order specified) of Product\n                Defintion Template 4.N\n     coordlist- numpy array (float32) containg floating point values intended to\n                document the vertical discretisation associated to model data\n                on hybrid coordinate vertical levels.\n     numcoord - number of values in array coordlist.\n     drsnum   - Data Representation Template Number ( see Code Table 5.0 )\n     drstmpl  - numpy array with data values for the specified Data Representation\n                Template ( N=drsnum ).  Each element of this integer \n                array contains an entry (in the order specified) of Data\n                Representation Template 5.N\n                Note that some values in this template (eg. reference\n                values, number of bits, etc...) may be changed by the\n                data packing algorithms.\n                Use this to specify scaling factors and order of\n                spatial differencing, if desired.\n     field    - numpy array (float32) of data points to pack.\n     ngrdpts  - Number of data points in grid.\n                i.e.  size of fld and bmap.\n     ibitmap  - Bitmap indicator ( see Code Table 6.0 )\n                0 = bitmap applies and is included in Section 6.\n                1-253 = Predefined bitmap applies\n                254 = Previously defined bitmap applies to this field\n                255 = Bit map does not apply to this product.\n     bitmap   - numpy array (int32) containing bitmap to be added. \n                (if ibitmap=0 or 254)\n\n   OUTPUT ARGUMENT LIST:      \n     gribmsg  - String with the updated GRIB2 message.\n                Must be allocated large enough to store the entire\n                GRIB2 message.\n\n   RETURN VALUES:\n     ierr     - Return code.\n              > 0 = Current size of updated GRIB2 message\n               -1 = GRIB message was not initialized.  Need to call\n                    routine gribcreate first.\n               -2 = GRIB message already complete.  Cannot add new section.\n               -3 = Sum of Section byte counts doesn\'t add to total byte count\n               -4 = Previous Section was not 3 or 7.\n               -5 = Could not find requested Product Definition Template.\n               -6 = Section 3 (GDS) not previously defined in message\n               -7 = Tried to use unsupported Data Representationi Template\n               -8 = Specified use of a previously defined bitmap, but one\n                    does not exist in the GRIB message.\n               -9 = GDT of one of 5.50 through 5.53 required to pack field \n                    using DRT 5.51.\n              -10 = Error packing data field. \n    ";
static PyObject *__pyx_f_5g2lib_grib2_addfield(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_gribmsg = 0;
  PyObject *__pyx_v_pdsnum = 0;
  PyObject *__pyx_v_pdstmpl = 0;
  PyObject *__pyx_v_coordlist = 0;
  PyObject *__pyx_v_drsnum = 0;
  PyObject *__pyx_v_drstmpl = 0;
  PyObject *__pyx_v_field = 0;
  PyObject *__pyx_v_ibitmap = 0;
  PyObject *__pyx_v_bitmap = 0;
  g2int __pyx_v_ierr;
  g2int __pyx_v_ipdsnum;
  g2int __pyx_v_numcoord;
  g2int (*__pyx_v_ipdstmpl);
  g2int __pyx_v_idrsnum;
  g2int (*__pyx_v_idrstmpl);
  g2float (*__pyx_v_fld);
  g2float (*__pyx_v_fcoordlist);
  g2int (*__pyx_v_bmap);
  g2int __pyx_v_ngrdpts;
  g2int __pyx_v_ibmap;
  void (*__pyx_v_pdtmpldat);
  void (*__pyx_v_drtmpldat);
  void (*__pyx_v_coordlistdat);
  void (*__pyx_v_fielddat);
  void (*__pyx_v_bitmapdat);
  Py_ssize_t __pyx_v_buflen;
  unsigned char (*__pyx_v_cgrib);
  PyObject *__pyx_v_msg;
  PyObject *__pyx_r;
  int __pyx_1;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  PyObject *__pyx_4 = 0;
  g2int __pyx_5;
  PyObject *__pyx_6 = 0;
  static char *__pyx_argnames[] = {"gribmsg","pdsnum","pdstmpl","coordlist","drsnum","drstmpl","field","ibitmap","bitmap",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "OOOOOOOOO", __pyx_argnames, &__pyx_v_gribmsg, &__pyx_v_pdsnum, &__pyx_v_pdstmpl, &__pyx_v_coordlist, &__pyx_v_drsnum, &__pyx_v_drstmpl, &__pyx_v_field, &__pyx_v_ibitmap, &__pyx_v_bitmap)) return 0;
  Py_INCREF(__pyx_v_gribmsg);
  Py_INCREF(__pyx_v_pdsnum);
  Py_INCREF(__pyx_v_pdstmpl);
  Py_INCREF(__pyx_v_coordlist);
  Py_INCREF(__pyx_v_drsnum);
  Py_INCREF(__pyx_v_drstmpl);
  Py_INCREF(__pyx_v_field);
  Py_INCREF(__pyx_v_ibitmap);
  Py_INCREF(__pyx_v_bitmap);
  __pyx_v_msg = Py_None; Py_INCREF(Py_None);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":741 */
  __pyx_v_ipdsnum = ((long )PyInt_AsLong(__pyx_v_pdsnum));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":742 */
  PyObject_AsReadBuffer(__pyx_v_pdstmpl,(&__pyx_v_pdtmpldat),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":743 */
  __pyx_v_ipdstmpl = ((g2int (*))__pyx_v_pdtmpldat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":744 */
  __pyx_v_idrsnum = ((long )PyInt_AsLong(__pyx_v_drsnum));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":745 */
  PyObject_AsReadBuffer(__pyx_v_drstmpl,(&__pyx_v_drtmpldat),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":746 */
  __pyx_v_idrstmpl = ((g2int (*))__pyx_v_drtmpldat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":747 */
  __pyx_1 = __pyx_v_coordlist != Py_None;
  if (__pyx_1) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":748 */
    PyObject_AsReadBuffer(__pyx_v_coordlist,(&__pyx_v_coordlistdat),(&__pyx_v_buflen));

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":749 */
    __pyx_v_fcoordlist = ((g2float (*))__pyx_v_coordlistdat);

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":750 */
    __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_len); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 750; goto __pyx_L1;}
    __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 750; goto __pyx_L1;}
    Py_INCREF(__pyx_v_coordlist);
    PyTuple_SET_ITEM(__pyx_3, 0, __pyx_v_coordlist);
    __pyx_4 = PyObject_CallObject(__pyx_2, __pyx_3); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 750; goto __pyx_L1;}
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    Py_DECREF(__pyx_3); __pyx_3 = 0;
    __pyx_5 = PyInt_AsLong(__pyx_4); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 750; goto __pyx_L1;}
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    __pyx_v_numcoord = __pyx_5;
    goto __pyx_L2;
  }
  /*else*/ {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":752 */
    __pyx_v_fcoordlist = NULL;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":753 */
    __pyx_v_numcoord = 0;
  }
  __pyx_L2:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":754 */
  PyObject_AsReadBuffer(__pyx_v_field,(&__pyx_v_fielddat),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":755 */
  __pyx_v_fld = ((g2float (*))__pyx_v_fielddat);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":756 */
  __pyx_v_ibmap = ((long )PyInt_AsLong(__pyx_v_ibitmap));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":757 */
  __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_len); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 757; goto __pyx_L1;}
  __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 757; goto __pyx_L1;}
  Py_INCREF(__pyx_v_field);
  PyTuple_SET_ITEM(__pyx_3, 0, __pyx_v_field);
  __pyx_4 = PyObject_CallObject(__pyx_2, __pyx_3); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 757; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  __pyx_5 = PyInt_AsLong(__pyx_4); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 757; goto __pyx_L1;}
  Py_DECREF(__pyx_4); __pyx_4 = 0;
  __pyx_v_ngrdpts = __pyx_5;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":758 */
  __pyx_2 = PyInt_FromLong(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 758; goto __pyx_L1;}
  if (PyObject_Cmp(__pyx_v_ibitmap, __pyx_2, &__pyx_1) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 758; goto __pyx_L1;}
  __pyx_1 = __pyx_1 == 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  if (!__pyx_1) {
    __pyx_3 = PyInt_FromLong(254); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 758; goto __pyx_L1;}
    if (PyObject_Cmp(__pyx_v_ibitmap, __pyx_3, &__pyx_1) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 758; goto __pyx_L1;}
    __pyx_1 = __pyx_1 == 0;
    Py_DECREF(__pyx_3); __pyx_3 = 0;
  }
  if (__pyx_1) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":759 */
    PyObject_AsReadBuffer(__pyx_v_bitmap,(&__pyx_v_bitmapdat),(&__pyx_v_buflen));

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":760 */
    __pyx_v_bmap = ((g2int (*))__pyx_v_bitmapdat);
    goto __pyx_L3;
  }
  /*else*/ {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":762 */
    __pyx_v_bmap = NULL;
  }
  __pyx_L3:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":763 */
  __pyx_4 = PyInt_FromLong(4); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 763; goto __pyx_L1;}
  __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_len); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 763; goto __pyx_L1;}
  __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 763; goto __pyx_L1;}
  Py_INCREF(__pyx_v_drstmpl);
  PyTuple_SET_ITEM(__pyx_3, 0, __pyx_v_drstmpl);
  __pyx_6 = PyObject_CallObject(__pyx_2, __pyx_3); if (!__pyx_6) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 763; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  __pyx_2 = PyInt_FromLong(__pyx_v_ngrdpts); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 763; goto __pyx_L1;}
  __pyx_3 = PyNumber_Add(__pyx_6, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 763; goto __pyx_L1;}
  Py_DECREF(__pyx_6); __pyx_6 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  __pyx_6 = PyInt_FromLong(4); if (!__pyx_6) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 763; goto __pyx_L1;}
  __pyx_2 = PyNumber_Add(__pyx_3, __pyx_6); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 763; goto __pyx_L1;}
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  Py_DECREF(__pyx_6); __pyx_6 = 0;
  __pyx_3 = PyNumber_Multiply(__pyx_4, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 763; goto __pyx_L1;}
  Py_DECREF(__pyx_4); __pyx_4 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  __pyx_6 = PyNumber_Multiply(__pyx_3, __pyx_k40p); if (!__pyx_6) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 763; goto __pyx_L1;}
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  __pyx_4 = PyNumber_Add(__pyx_v_gribmsg, __pyx_6); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 763; goto __pyx_L1;}
  Py_DECREF(__pyx_6); __pyx_6 = 0;
  Py_DECREF(__pyx_v_gribmsg);
  __pyx_v_gribmsg = __pyx_4;
  __pyx_4 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":764 */
  __pyx_v_cgrib = ((unsigned char (*))PyString_AsString(__pyx_v_gribmsg));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":765 */
  __pyx_v_ierr = g2_addfield(__pyx_v_cgrib,__pyx_v_ipdsnum,__pyx_v_ipdstmpl,__pyx_v_fcoordlist,__pyx_v_numcoord,__pyx_v_idrsnum,__pyx_v_idrstmpl,__pyx_v_fld,__pyx_v_ngrdpts,__pyx_v_ibmap,__pyx_v_bmap);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":766 */
  __pyx_1 = (__pyx_v_ierr < 0);
  if (__pyx_1) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":767 */
    __pyx_2 = PyInt_FromLong(__pyx_v_ierr); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 767; goto __pyx_L1;}
    __pyx_3 = PyNumber_Remainder(__pyx_k41p, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 767; goto __pyx_L1;}
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    Py_DECREF(__pyx_v_msg);
    __pyx_v_msg = __pyx_3;
    __pyx_3 = 0;

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":768 */
    __pyx_6 = __Pyx_GetName(__pyx_b, __pyx_n_RuntimeError); if (!__pyx_6) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 768; goto __pyx_L1;}
    __pyx_4 = PyTuple_New(1); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 768; goto __pyx_L1;}
    Py_INCREF(__pyx_v_msg);
    PyTuple_SET_ITEM(__pyx_4, 0, __pyx_v_msg);
    __pyx_2 = PyObject_CallObject(__pyx_6, __pyx_4); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 768; goto __pyx_L1;}
    Py_DECREF(__pyx_6); __pyx_6 = 0;
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    __Pyx_Raise(__pyx_2, 0, 0);
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 768; goto __pyx_L1;}
    goto __pyx_L4;
  }
  __pyx_L4:;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":769 */
  __pyx_3 = PyString_FromStringAndSize(((char (*))__pyx_v_cgrib),__pyx_v_ierr); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 769; goto __pyx_L1;}
  Py_DECREF(__pyx_v_gribmsg);
  __pyx_v_gribmsg = __pyx_3;
  __pyx_3 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":770 */
  __pyx_6 = PyInt_FromLong(__pyx_v_ierr); if (!__pyx_6) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 770; goto __pyx_L1;}
  __pyx_4 = PyTuple_New(2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 770; goto __pyx_L1;}
  Py_INCREF(__pyx_v_gribmsg);
  PyTuple_SET_ITEM(__pyx_4, 0, __pyx_v_gribmsg);
  PyTuple_SET_ITEM(__pyx_4, 1, __pyx_6);
  __pyx_6 = 0;
  __pyx_r = __pyx_4;
  __pyx_4 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  Py_XDECREF(__pyx_4);
  Py_XDECREF(__pyx_6);
  __Pyx_AddTraceback("g2lib.grib2_addfield");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_msg);
  Py_DECREF(__pyx_v_gribmsg);
  Py_DECREF(__pyx_v_pdsnum);
  Py_DECREF(__pyx_v_pdstmpl);
  Py_DECREF(__pyx_v_coordlist);
  Py_DECREF(__pyx_v_drsnum);
  Py_DECREF(__pyx_v_drstmpl);
  Py_DECREF(__pyx_v_field);
  Py_DECREF(__pyx_v_ibitmap);
  Py_DECREF(__pyx_v_bitmap);
  return __pyx_r;
}


static PyObject *__pyx_f_5g2lib__redtoreg(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5g2lib__redtoreg(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_nlons;
  PyObject *__pyx_v_lonsperlat = 0;
  PyObject *__pyx_v_redgrid = 0;
  PyObject *__pyx_v_zeros = 0;
  PyObject *__pyx_v_order = 0;
  g2int __pyx_v_i;
  g2int __pyx_v_j;
  g2int __pyx_v_n;
  g2int __pyx_v_im;
  g2int __pyx_v_ip;
  g2int __pyx_v_indx;
  g2int __pyx_v_ilons;
  g2int __pyx_v_nlats;
  g2int __pyx_v_npts;
  Py_ssize_t __pyx_v_buflen;
  void (*__pyx_v_lonsperlatbuf);
  void (*__pyx_v_reggridbuf);
  void (*__pyx_v_redgridbuf);
  g2int (*__pyx_v_lonsperlatdat);
  g2float (*__pyx_v_reggriddat);
  g2float (*__pyx_v_redgriddat);
  g2float __pyx_v_zxi;
  g2float __pyx_v_zdx;
  g2float __pyx_v_flons;
  PyObject *__pyx_v_reggrid;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  g2int __pyx_4;
  int __pyx_5;
  static char *__pyx_argnames[] = {"nlons","lonsperlat","redgrid","zeros","order",0};
  __pyx_v_order = __pyx_k7;
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "iOOO|O", __pyx_argnames, &__pyx_v_nlons, &__pyx_v_lonsperlat, &__pyx_v_redgrid, &__pyx_v_zeros, &__pyx_v_order)) return 0;
  Py_INCREF(__pyx_v_lonsperlat);
  Py_INCREF(__pyx_v_redgrid);
  Py_INCREF(__pyx_v_zeros);
  Py_INCREF(__pyx_v_order);
  __pyx_v_reggrid = Py_None; Py_INCREF(Py_None);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":782 */
  __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_len); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 782; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 782; goto __pyx_L1;}
  Py_INCREF(__pyx_v_lonsperlat);
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_lonsperlat);
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 782; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  __pyx_4 = PyInt_AsLong(__pyx_3); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 782; goto __pyx_L1;}
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  __pyx_v_nlats = __pyx_4;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":783 */
  __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_len); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 783; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 783; goto __pyx_L1;}
  Py_INCREF(__pyx_v_redgrid);
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_redgrid);
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 783; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  __pyx_4 = PyInt_AsLong(__pyx_3); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 783; goto __pyx_L1;}
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  __pyx_v_npts = __pyx_4;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":784 */
  PyObject_AsReadBuffer(__pyx_v_lonsperlat,(&__pyx_v_lonsperlatbuf),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":785 */
  __pyx_v_lonsperlatdat = ((g2int (*))__pyx_v_lonsperlatbuf);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":786 */
  PyObject_AsReadBuffer(__pyx_v_redgrid,(&__pyx_v_redgridbuf),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":787 */
  __pyx_v_redgriddat = ((g2float (*))__pyx_v_redgridbuf);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":788 */
  __pyx_1 = PyInt_FromLong(__pyx_v_nlats); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 788; goto __pyx_L1;}
  __pyx_2 = PyInt_FromLong(__pyx_v_nlons); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 788; goto __pyx_L1;}
  __pyx_3 = PyTuple_New(2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 788; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_3, 0, __pyx_1);
  PyTuple_SET_ITEM(__pyx_3, 1, __pyx_2);
  __pyx_1 = 0;
  __pyx_2 = 0;
  __pyx_1 = PyTuple_New(2); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 788; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_1, 0, __pyx_3);
  Py_INCREF(__pyx_n_f);
  PyTuple_SET_ITEM(__pyx_1, 1, __pyx_n_f);
  __pyx_3 = 0;
  __pyx_2 = PyObject_CallObject(__pyx_v_zeros, __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 788; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_v_reggrid);
  __pyx_v_reggrid = __pyx_2;
  __pyx_2 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":790 */
  PyObject_AsWriteBuffer(__pyx_v_reggrid,(&__pyx_v_reggridbuf),(&__pyx_v_buflen));

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":791 */
  __pyx_v_reggriddat = ((g2float (*))__pyx_v_reggridbuf);

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":793 */
  __pyx_v_n = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":794 */
  __pyx_v_indx = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":795 */
  for (__pyx_v_j = 0; __pyx_v_j < __pyx_v_nlats; ++__pyx_v_j) {

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":796 */
    __pyx_v_ilons = (__pyx_v_lonsperlatdat[__pyx_v_j]);

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":797 */
    __pyx_v_flons = ((float )__pyx_v_ilons);

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":798 */
    for (__pyx_v_i = 0; __pyx_v_i < __pyx_v_nlons; ++__pyx_v_i) {

      /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":801 */
      __pyx_v_zxi = ((__pyx_v_i * __pyx_v_flons) / __pyx_v_nlons);

      /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":802 */
      __pyx_v_im = ((long )__pyx_v_zxi);

      /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":803 */
      __pyx_v_zdx = (__pyx_v_zxi - ((float )__pyx_v_im));

      /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":804 */
      __pyx_v_im = ((__pyx_v_im + __pyx_v_ilons) % __pyx_v_ilons);

      /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":805 */
      __pyx_v_ip = (((__pyx_v_im + 1) + __pyx_v_ilons) % __pyx_v_ilons);

      /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":806 */
      __pyx_5 = PyObject_IsTrue(__pyx_v_order); if (__pyx_5 < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 806; goto __pyx_L1;}
      if (__pyx_5) {

        /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":807 */
        (__pyx_v_reggriddat[__pyx_v_n]) = (((__pyx_v_redgriddat[(__pyx_v_indx + __pyx_v_im)]) * (1. - __pyx_v_zdx)) + ((__pyx_v_redgriddat[(__pyx_v_indx + __pyx_v_ip)]) * __pyx_v_zdx));
        goto __pyx_L6;
      }
      /*else*/ {

        /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":809 */
        __pyx_5 = (__pyx_v_zdx < 0.5);
        if (__pyx_5) {

          /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":810 */
          (__pyx_v_reggriddat[__pyx_v_n]) = (__pyx_v_redgriddat[(__pyx_v_indx + __pyx_v_im)]);
          goto __pyx_L7;
        }
        /*else*/ {

          /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":812 */
          (__pyx_v_reggriddat[__pyx_v_n]) = (__pyx_v_redgriddat[(__pyx_v_indx + __pyx_v_ip)]);
        }
        __pyx_L7:;
      }
      __pyx_L6:;

      /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":813 */
      __pyx_v_n = (__pyx_v_n + 1);
    }

    /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":814 */
    __pyx_v_indx = (__pyx_v_indx + __pyx_v_ilons);
  }

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":815 */
  Py_INCREF(__pyx_v_reggrid);
  __pyx_r = __pyx_v_reggrid;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("g2lib._redtoreg");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_reggrid);
  Py_DECREF(__pyx_v_lonsperlat);
  Py_DECREF(__pyx_v_redgrid);
  Py_DECREF(__pyx_v_zeros);
  Py_DECREF(__pyx_v_order);
  return __pyx_r;
}

static __Pyx_InternTabEntry __pyx_intern_tab[] = {
  {&__pyx_n_C, "C"},
  {&__pyx_n_False, "False"},
  {&__pyx_n_RuntimeError, "RuntimeError"},
  {&__pyx_n__redtoreg, "_redtoreg"},
  {&__pyx_n_ceil, "ceil"},
  {&__pyx_n_f, "f"},
  {&__pyx_n_g, "g"},
  {&__pyx_n_grib2_addfield, "grib2_addfield"},
  {&__pyx_n_grib2_addgrid, "grib2_addgrid"},
  {&__pyx_n_grib2_create, "grib2_create"},
  {&__pyx_n_grib2_end, "grib2_end"},
  {&__pyx_n_i, "i"},
  {&__pyx_n_int, "int"},
  {&__pyx_n_itor_ieee, "itor_ieee"},
  {&__pyx_n_len, "len"},
  {&__pyx_n_log10, "log10"},
  {&__pyx_n_math, "math"},
  {&__pyx_n_order, "order"},
  {&__pyx_n_pow, "pow"},
  {&__pyx_n_repr, "repr"},
  {&__pyx_n_rtoi_ieee, "rtoi_ieee"},
  {&__pyx_n_unpack1, "unpack1"},
  {&__pyx_n_unpack3, "unpack3"},
  {&__pyx_n_unpack4, "unpack4"},
  {&__pyx_n_unpack5, "unpack5"},
  {&__pyx_n_unpack6, "unpack6"},
  {&__pyx_n_unpack7, "unpack7"},
  {0, 0}
};

static __Pyx_StringTabEntry __pyx_string_tab[] = {
  {&__pyx_k8p, __pyx_k8, sizeof(__pyx_k8)},
  {&__pyx_k9p, __pyx_k9, sizeof(__pyx_k9)},
  {&__pyx_k10p, __pyx_k10, sizeof(__pyx_k10)},
  {&__pyx_k11p, __pyx_k11, sizeof(__pyx_k11)},
  {&__pyx_k12p, __pyx_k12, sizeof(__pyx_k12)},
  {&__pyx_k13p, __pyx_k13, sizeof(__pyx_k13)},
  {&__pyx_k14p, __pyx_k14, sizeof(__pyx_k14)},
  {&__pyx_k16p, __pyx_k16, sizeof(__pyx_k16)},
  {&__pyx_k20p, __pyx_k20, sizeof(__pyx_k20)},
  {&__pyx_k23p, __pyx_k23, sizeof(__pyx_k23)},
  {&__pyx_k25p, __pyx_k25, sizeof(__pyx_k25)},
  {&__pyx_k27p, __pyx_k27, sizeof(__pyx_k27)},
  {&__pyx_k30p, __pyx_k30, sizeof(__pyx_k30)},
  {&__pyx_k32p, __pyx_k32, sizeof(__pyx_k32)},
  {&__pyx_k33p, __pyx_k33, sizeof(__pyx_k33)},
  {&__pyx_k34p, __pyx_k34, sizeof(__pyx_k34)},
  {&__pyx_k35p, __pyx_k35, sizeof(__pyx_k35)},
  {&__pyx_k36p, __pyx_k36, sizeof(__pyx_k36)},
  {&__pyx_k37p, __pyx_k37, sizeof(__pyx_k37)},
  {&__pyx_k38p, __pyx_k38, sizeof(__pyx_k38)},
  {&__pyx_k39p, __pyx_k39, sizeof(__pyx_k39)},
  {&__pyx_k40p, __pyx_k40, sizeof(__pyx_k40)},
  {&__pyx_k41p, __pyx_k41, sizeof(__pyx_k41)},
  {0, 0, 0}
};

static struct PyMethodDef __pyx_methods[] = {
  {"rtoi_ieee", (PyCFunction)__pyx_f_5g2lib_rtoi_ieee, METH_VARARGS|METH_KEYWORDS, __pyx_doc_5g2lib_rtoi_ieee},
  {"itor_ieee", (PyCFunction)__pyx_f_5g2lib_itor_ieee, METH_VARARGS|METH_KEYWORDS, __pyx_doc_5g2lib_itor_ieee},
  {"unpack1", (PyCFunction)__pyx_f_5g2lib_unpack1, METH_VARARGS|METH_KEYWORDS, __pyx_doc_5g2lib_unpack1},
  {"unpack3", (PyCFunction)__pyx_f_5g2lib_unpack3, METH_VARARGS|METH_KEYWORDS, __pyx_doc_5g2lib_unpack3},
  {"unpack4", (PyCFunction)__pyx_f_5g2lib_unpack4, METH_VARARGS|METH_KEYWORDS, __pyx_doc_5g2lib_unpack4},
  {"unpack5", (PyCFunction)__pyx_f_5g2lib_unpack5, METH_VARARGS|METH_KEYWORDS, __pyx_doc_5g2lib_unpack5},
  {"unpack6", (PyCFunction)__pyx_f_5g2lib_unpack6, METH_VARARGS|METH_KEYWORDS, __pyx_doc_5g2lib_unpack6},
  {"unpack7", (PyCFunction)__pyx_f_5g2lib_unpack7, METH_VARARGS|METH_KEYWORDS, __pyx_doc_5g2lib_unpack7},
  {"grib2_create", (PyCFunction)__pyx_f_5g2lib_grib2_create, METH_VARARGS|METH_KEYWORDS, __pyx_doc_5g2lib_grib2_create},
  {"grib2_end", (PyCFunction)__pyx_f_5g2lib_grib2_end, METH_VARARGS|METH_KEYWORDS, __pyx_doc_5g2lib_grib2_end},
  {"grib2_addgrid", (PyCFunction)__pyx_f_5g2lib_grib2_addgrid, METH_VARARGS|METH_KEYWORDS, __pyx_doc_5g2lib_grib2_addgrid},
  {"grib2_addfield", (PyCFunction)__pyx_f_5g2lib_grib2_addfield, METH_VARARGS|METH_KEYWORDS, __pyx_doc_5g2lib_grib2_addfield},
  {"_redtoreg", (PyCFunction)__pyx_f_5g2lib__redtoreg, METH_VARARGS|METH_KEYWORDS, 0},
  {0, 0, 0, 0}
};

static void __pyx_init_filenames(void); /*proto*/

PyMODINIT_FUNC initg2lib(void); /*proto*/
PyMODINIT_FUNC initg2lib(void) {
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  __pyx_init_filenames();
  __pyx_m = Py_InitModule4("g2lib", __pyx_methods, __pyx_mdoc, 0, PYTHON_API_VERSION);
  if (!__pyx_m) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1; goto __pyx_L1;};
  __pyx_b = PyImport_AddModule("__builtin__");
  if (!__pyx_b) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1; goto __pyx_L1;};
  if (PyObject_SetAttrString(__pyx_m, "__builtins__", __pyx_b) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1; goto __pyx_L1;};
  if (__Pyx_InternStrings(__pyx_intern_tab) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1; goto __pyx_L1;};
  if (__Pyx_InitStrings(__pyx_string_tab) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1; goto __pyx_L1;};

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":5 */
  __pyx_1 = __Pyx_Import(__pyx_n_math, 0); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 5; goto __pyx_L1;}
  if (PyObject_SetAttr(__pyx_m, __pyx_n_math, __pyx_1) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 5; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":402 */
  __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_False); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 402; goto __pyx_L1;}
  __pyx_k2 = __pyx_1;
  __pyx_1 = 0;
  Py_INCREF(__pyx_n_C);
  __pyx_k4 = __pyx_n_C;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":591 */
  Py_INCREF(Py_None);
  __pyx_k5 = Py_None;
  __pyx_2 = PyInt_FromLong(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 591; goto __pyx_L1;}
  __pyx_k6 = __pyx_2;
  __pyx_2 = 0;

  /* "/Volumes/User/jwhitaker/python/pygrib2/g2clib_src/g2lib.pyx":772 */
  __pyx_3 = PyInt_FromLong(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 772; goto __pyx_L1;}
  __pyx_k7 = __pyx_3;
  __pyx_3 = 0;
  return;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("g2lib");
}

static char *__pyx_filenames[] = {
  "g2lib.pyx",
};

/* Runtime support code */

static void __pyx_init_filenames(void) {
  __pyx_f = __pyx_filenames;
}

static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list) {
    PyObject *__import__ = 0;
    PyObject *empty_list = 0;
    PyObject *module = 0;
    PyObject *global_dict = 0;
    PyObject *empty_dict = 0;
    PyObject *list;
    __import__ = PyObject_GetAttrString(__pyx_b, "__import__");
    if (!__import__)
        goto bad;
    if (from_list)
        list = from_list;
    else {
        empty_list = PyList_New(0);
        if (!empty_list)
            goto bad;
        list = empty_list;
    }
    global_dict = PyModule_GetDict(__pyx_m);
    if (!global_dict)
        goto bad;
    empty_dict = PyDict_New();
    if (!empty_dict)
        goto bad;
    module = PyObject_CallFunction(__import__, "OOOO",
        name, global_dict, empty_dict, list);
bad:
    Py_XDECREF(empty_list);
    Py_XDECREF(__import__);
    Py_XDECREF(empty_dict);
    return module;
}

static PyObject *__Pyx_GetName(PyObject *dict, PyObject *name) {
    PyObject *result;
    result = PyObject_GetAttr(dict, name);
    if (!result)
        PyErr_SetObject(PyExc_NameError, name);
    return result;
}

static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb) {
    Py_XINCREF(type);
    Py_XINCREF(value);
    Py_XINCREF(tb);
    /* First, check the traceback argument, replacing None with NULL. */
    if (tb == Py_None) {
        Py_DECREF(tb);
        tb = 0;
    }
    else if (tb != NULL && !PyTraceBack_Check(tb)) {
        PyErr_SetString(PyExc_TypeError,
            "raise: arg 3 must be a traceback or None");
        goto raise_error;
    }
    /* Next, replace a missing value with None */
    if (value == NULL) {
        value = Py_None;
        Py_INCREF(value);
    }
    /* Next, repeatedly, replace a tuple exception with its first item */
    while (PyTuple_Check(type) && PyTuple_Size(type) > 0) {
        PyObject *tmp = type;
        type = PyTuple_GET_ITEM(type, 0);
        Py_INCREF(type);
        Py_DECREF(tmp);
    }
    if (PyString_Check(type)) {
        if (PyErr_Warn(PyExc_DeprecationWarning,
                "raising a string exception is deprecated"))
            goto raise_error;
    }
    else if (PyType_Check(type) || PyClass_Check(type))
        ; /*PyErr_NormalizeException(&type, &value, &tb);*/
    else {
        /* Raising an instance.  The value should be a dummy. */
        if (value != Py_None) {
            PyErr_SetString(PyExc_TypeError,
                "instance exception may not have a separate value");
            goto raise_error;
        }
        /* Normalize to raise <class>, <instance> */
        Py_DECREF(value);
        value = type;
        if (PyInstance_Check(type))
            type = (PyObject*) ((PyInstanceObject*)type)->in_class;
        else
            type = (PyObject*) type->ob_type;
        Py_INCREF(type);
    }
    PyErr_Restore(type, value, tb);
    return;
raise_error:
    Py_XDECREF(value);
    Py_XDECREF(type);
    Py_XDECREF(tb);
    return;
}

static PyObject *__Pyx_GetStdout(void) {
    PyObject *f = PySys_GetObject("stdout");
    if (!f) {
        PyErr_SetString(PyExc_RuntimeError, "lost sys.stdout");
    }
    return f;
}

static int __Pyx_PrintItem(PyObject *v) {
    PyObject *f;
    
    if (!(f = __Pyx_GetStdout()))
        return -1;
    if (PyFile_SoftSpace(f, 1)) {
        if (PyFile_WriteString(" ", f) < 0)
            return -1;
    }
    if (PyFile_WriteObject(v, f, Py_PRINT_RAW) < 0)
        return -1;
    if (PyString_Check(v)) {
        char *s = PyString_AsString(v);
        int len = PyString_Size(v);
        if (len > 0 &&
            isspace(Py_CHARMASK(s[len-1])) &&
            s[len-1] != ' ')
                PyFile_SoftSpace(f, 0);
    }
    return 0;
}

static int __Pyx_PrintNewline(void) {
    PyObject *f;
    
    if (!(f = __Pyx_GetStdout()))
        return -1;
    if (PyFile_WriteString("\n", f) < 0)
        return -1;
    PyFile_SoftSpace(f, 0);
    return 0;
}

static int __Pyx_InternStrings(__Pyx_InternTabEntry *t) {
    while (t->p) {
        *t->p = PyString_InternFromString(t->s);
        if (!*t->p)
            return -1;
        ++t;
    }
    return 0;
}

static int __Pyx_InitStrings(__Pyx_StringTabEntry *t) {
    while (t->p) {
        *t->p = PyString_FromStringAndSize(t->s, t->n - 1);
        if (!*t->p)
            return -1;
        ++t;
    }
    return 0;
}

#include "compile.h"
#include "frameobject.h"
#include "traceback.h"

static void __Pyx_AddTraceback(char *funcname) {
    PyObject *py_srcfile = 0;
    PyObject *py_funcname = 0;
    PyObject *py_globals = 0;
    PyObject *empty_tuple = 0;
    PyObject *empty_string = 0;
    PyCodeObject *py_code = 0;
    PyFrameObject *py_frame = 0;
    
    py_srcfile = PyString_FromString(__pyx_filename);
    if (!py_srcfile) goto bad;
    py_funcname = PyString_FromString(funcname);
    if (!py_funcname) goto bad;
    py_globals = PyModule_GetDict(__pyx_m);
    if (!py_globals) goto bad;
    empty_tuple = PyTuple_New(0);
    if (!empty_tuple) goto bad;
    empty_string = PyString_FromString("");
    if (!empty_string) goto bad;
    py_code = PyCode_New(
        0,            /*int argcount,*/
        0,            /*int nlocals,*/
        0,            /*int stacksize,*/
        0,            /*int flags,*/
        empty_string, /*PyObject *code,*/
        empty_tuple,  /*PyObject *consts,*/
        empty_tuple,  /*PyObject *names,*/
        empty_tuple,  /*PyObject *varnames,*/
        empty_tuple,  /*PyObject *freevars,*/
        empty_tuple,  /*PyObject *cellvars,*/
        py_srcfile,   /*PyObject *filename,*/
        py_funcname,  /*PyObject *name,*/
        __pyx_lineno,   /*int firstlineno,*/
        empty_string  /*PyObject *lnotab*/
    );
    if (!py_code) goto bad;
    py_frame = PyFrame_New(
        PyThreadState_Get(), /*PyThreadState *tstate,*/
        py_code,             /*PyCodeObject *code,*/
        py_globals,          /*PyObject *globals,*/
        0                    /*PyObject *locals*/
    );
    if (!py_frame) goto bad;
    py_frame->f_lineno = __pyx_lineno;
    PyTraceBack_Here(py_frame);
bad:
    Py_XDECREF(py_srcfile);
    Py_XDECREF(py_funcname);
    Py_XDECREF(empty_tuple);
    Py_XDECREF(empty_string);
    Py_XDECREF(py_code);
    Py_XDECREF(py_frame);
}
