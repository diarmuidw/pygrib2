<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>grib2.grib2new</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="grib2-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="grib2-module.html">Package&nbsp;grib2</a> ::
        Module&nbsp;grib2new
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module grib2new</h1><p class="nomargin-top"><span class="codelink"><a href="grib2.grib2new-pysrc.html">source&nbsp;code</a></span></p>
<h1 class="heading">Introduction</h1>
    <p>Python module for reading and writing GRIB edition 2 (GRIB2) files 
    (<a 
    href="http://www.cdc.noaa.gov/people/jeffrey.s.whitaker/python/grib2/pygrib2-20070503.tar.gz"
    target="_top">download</a>). GRIB2 is the second version of the World 
    Meterological Organization (WMO) standard for distributing gridded 
    data. The standard is outlined in <a 
    href="http://www.wmo.ch/web/www/DPS/grib-2.html" target="_top">FM92 
    GRIB Edition 2, Code Form and Tables</a>. Includes a python programmer 
    interface for reading/writing GRIB2 grids as well as a command-line 
    utility (rdgrib) much like Wesley Ebisuzaki's <a 
    href="http://www.cpc.ncep.noaa.gov/products/wesley/wgrib.html" 
    target="_top">wgrib</a>. This package can't read GRIB edition 1 files 
    directly, but these files can be converted to GRIB2 using <a 
    href="http://www.nco.ncep.noaa.gov/pmb/codes/GRIB2/" 
    target="_top">cnvgrib</a>.</p>
  <h1 class="heading">Required</h1>
    <ul>
      <li>
        <a href="http://python.org" target="_top">Python</a> 2.3 or higher.
      </li>
      <li>
        <a 
        href="http://sourceforge.net/project/showfiles.php?group_id=1369" 
        target="_top">numpy</a> N-dimensional array object for python.  If 
        numpy isn't installed, an attempt will be made to use it's 
        predecesor, Numeric, instead.
      </li>
      <li>
        <a href="http://code.google.com/p/pyproj/" target="_top">pyproj</a>
        Python interface to <a href="http://proj.maptools.org" 
        target="_top">PROJ.4</a> library for cartographic transformations. 
        <a href="http://proj.maptools.org" target="_top">PROJ.4</a> library
        must be installed first.
      </li>
    </ul>
  <h1 class="heading">Recommended</h1>
    <ul>
      <li>
        <a href="http://www.ece.uvic.ca/~mdadams/jasper" 
        target="_top">Jasper</a> library. This library is a C 
        implementation of the JPEG-2000 Part-1 standard (ISO/IEC 15444-1). 
        Required for JPEG2000 encoding support.
      </li>
      <li>
        <a href="http://www.libpng.org/pub/png/libpng.html" 
        target="_top">PNG</a> library. This library is a C implementation 
        of the Portable Network Graphics (PNG) image compression format. 
        It's probably already on your system. Required for PNG encoding 
        support.
      </li>
      <li>
        <a href="http://www.gzip.org/zlib/" target="_top">zlib</a> 
        compression library. It's almost certainly already on your system. 
        May be required for PNG encoding support.
      </li>
    </ul>
  <h1 class="heading">Installation</h1>
    <ul>
      <li>
        set the environment variables <code>$JASPER_DIR</code>, 
        <code>$PNG_DIR</code> and <code>$ZLIB_DIR</code> so that the 
        include files and libraries for jasper, png and zlib will be found.
        For example, the include files for jasper should be found in 
        <code>$JASPER_DIR/include</code>, and the jasper library should be 
        found in <code>$JASPER_DIR/lib</code>. If <code>$JASPER_DIR</code> 
        is not set, then the module will be built without JPEG2000 support.
        If <code>$PNG_DIR</code> is not set, the module will be built 
        without PNG support.
      </li>
      <li>
        Run 'python setup.py install', as root if necessary.
      </li>
    </ul>
  <h1 class="heading">Example usage</h1>
    <ul>
      <li>
        invoke the python interpreter, import the package:
<pre class="literalblock">
  &gt;&gt; python
  Python 2.3.4 (#1, Aug 27 2004, 17:22:27) 
  [GCC 3.3 20030304 (Apple Computer, Inc. build 1666)] on darwin
  Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
  &gt;&gt;&gt; from grib2 import Grib2Decode
</pre>
      </li>
      <li>
        open a GRIB2 file, create a Grib2Decode class instance:
<pre class="literalblock">
  &gt;&gt;&gt; grb = Grib2Decode('sampledata/gfs.grb')  
</pre>
      </li>
      <li>
        print an inventory of the file:
<pre class="literalblock">
  &gt;&gt;&gt; print grb 
  :1:1:Geopotential height [gpm]:100000 Pa (Isobaric surface):72 Hour Forecast initialized 2004120912:Latitude/longitude:Unperturbed high-resolution control forecast member 0 of 10:
  :2:1:Geopotential height [gpm]:97500 Pa (Isobaric surface):72 Hour Forecast initialized 2004120912:Latitude/longitude:Unperturbed high-resolution control forecast member 0 of 10:
  :3:1:Geopotential height [gpm]:95000 Pa (Isobaric surface):72 Hour Forecast initialized 2004120912:Latitude/longitude:Unperturbed high-resolution control forecast member 0 of 10:

     .....
</pre>
      </li>
      <li>
        find records with &quot;Geopotential height&quot; and 
        &quot;Isobaric surface&quot;:
<pre class="literalblock">
  &gt;&gt;&gt; recs = grb.search(['Geopotential height \[gpm\]','Isobaric surface'])
</pre>
      </li>
      <li>
        extract the data for those records and write to a binary file:
<pre class="literalblock">
  &gt;&gt;&gt; data = grb.getflds(recs)
  &gt;&gt;&gt; data.tofile('hgt.bin')
</pre>
      </li>
      <li>
        get the latitudes and longitudes for the 1st requested record:
<pre class="literalblock">
  &gt;&gt;&gt; lats, lons = grb.getlatlon(*recs[0])
</pre>
      </li>
      <li>
        write lats/lons to another binary file:
<pre class="literalblock">
  &gt;&gt;&gt; fileout = open('latlon.bin','wb')
  &gt;&gt;&gt; fileout.write(lats.tostring()); fileout.write(lons.tostring())
  &gt;&gt;&gt; fileout.close()
</pre>
      </li>
      <li>
        close the GRIB2 file:
<pre class="literalblock">
  &gt;&gt;&gt; grb.close()
</pre>
      </li>
      <li>
        To do the same thing with the rdgrib command line utility:
<pre class="literalblock">
&gt;&gt; rdgrib sampledata/gfs.grb
&gt;&gt; rdgrib -p 'Geopotential height \[gpm\]','Isobaric surface' -o hgt.bin sampledata/gfs.grb
&gt;&gt; rdgrib -d 1 --dumplatlons -o latlon.bin sampledata/gfs.grb
</pre>
      </li>
    </ul>
  <h1 class="heading">Documentation</h1>
    <ul>
      <li>
        see <a href="grib2.grib2new-module.html#Grib2Decode" 
        class="link">Grib2Decode</a>, <a 
        href="grib2.grib2new.Grib2Encode-class.html" 
        class="link">Grib2Encode</a> for python API documentation.
      </li>
      <li>
        type <code>rdgrib -h</code> for help on command line utility.
      </li>
    </ul>
  <h1 class="heading">Links</h1>
    <ul>
      <li>
        <a href="http://www.cpc.ncep.noaa.gov/products/wesley/wgrib2/" 
        target="_top">wgrib2</a>
      </li>
      <li>
        <a href="http://www.nco.ncep.noaa.gov/pmb/codes/GRIB2/" 
        target="_top">NCEP GRIB2 C and FORTRAN libraries</a>. This package 
        uses C routines from g2clib.
      </li>
      <li>
        <a href="http://www.ecmwf.int/products/data/software/grib2.html" 
        target="_top">ECMWF gribAPI</a>
      </li>
      <li>
        <a href="http://weather.gov/mdl/iwt/grib2/decoder.htm" 
        target="_top">MDL GRIB2 Decoder</a>
      </li>
      <li>
        <a href="http://nz.cosc.canterbury.ac.nz/~greg/python/Pyrex/" 
        target="_top">Pyrex</a> (used to create python interface to g2clib 
        and proj4).
      </li>
      <li>
        <a href="http://proj.maptools.org" target="_top">proj.4</a> (used 
        to perform cartographic transformations).
      </li>
    </ul>
  <h1 class="heading">Changelog</h1>
    <ul>
      <li>
        <b>20041213</b>: initial release. Fully supports lat/lon, gaussian,
        lambert conformal, polar stereographic and mercator grids.  
        Includes all product (section 4) tables included in the 20031105 
        version of the WMO GRIB2 <a 
        href="http://www.wmo.ch/web/www/DPS/grib-2.html" 
        target="_top">document</a>. Works with every GRIB2 file I could 
        find - if you find one it has trouble with please let me know.
      </li>
      <li>
        <b>20041215</b>: Fixed to handle files with 'communications 
        headers' at beginning of GRIB message.
      </li>
      <li>
        <b>20041217</b>: Added <code>matchrecs</code> class method to find 
        GRIB records with matching gdtnum, pdtnum, idsect, gdtmpl or pdtmpl
        values. Added example that reads an ETA grid and plots it with <a 
        href="http://matplotlib.sf.net/" target="_top">Matplotlib</a>.
      </li>
      <li>
        <b>20050118</b>: Updated C code to g2clib-1.0.2 (from 1.0.1).
      </li>
      <li>
        <b>20050316</b>: added a new class (<a 
        href="grib2.grib2new.Grib2Encode-class.html" 
        class="link">Grib2Encode</a>) for encoding GRIB2 messages. Renamed 
        Grib2 class <a href="grib2.grib2new-module.html#Grib2Decode" 
        class="link">Grib2Decode</a>. Additional options for rdgrib 
        utility.
      </li>
      <li>
        <b>20050322</b>: bugfixes for <a 
        href="grib2.grib2new.Grib2Encode-class.html" 
        class="link">Grib2Encode</a>. Added test script (test3.py) that 
        exercises both Grib2Decode and Grib2Encode.
      </li>
      <li>
        <b>20050716</b>: Added some support for irregular grids (such as 
        ECMWF reduced gaussian grids). JPEG2000 and PNG support is now 
        optional.
      </li>
      <li>
        <b>20050829</b>: getfld and getflds <a 
        href="grib2.grib2new-module.html#Grib2Decode" 
        class="link">Grib2Decode</a> methods can now return masked arrays 
        when there is a bitmap.
      </li>
      <li>
        <b>20050830</b>: Now displays more ensemble info in inventory.
      </li>
      <li>
        <b>20051121</b>: Now uses Numeric by default (no longer requires 
        numarray).  Can easily be modified to use nummarray or Numeric by 
        modifying the imports in 3 files (grib2.py, proj.py and 
        gaussian.py). A new utility, gribrepack, is included for repacking 
        a grib2 file with a different compression scheme.
      </li>
      <li>
        <b>20051125</b>: Updated grib2 tables to version 3 (released by WMO
        on Nov 2, 2005).
      </li>
      <li>
        <b>20060117</b>: Now uses numpy by default (instead of Numeric). 
        Python 2.5 compatibility fixes.
      </li>
      <li>
        <b>20070130</b>: Fixes some bugs found by Rob Cermak.  Now requires
        pyproj be installed first (which in turn requires that you have the
        PROJ.4 C-library installed). Updated to g2clib 1.0.4.
      </li>
      <li>
        <b>20070428</b>: Fixed memory leaks with a patch provided by Thomas
        Natschlager.
      </li>
      <li>
        <b>20070501</b>: Included new parameters approved by WMO for 
        operational implementation in November, 2007. These new parameters 
        are used in the <a href="http://tigge.ecmwf.int/tigge/d/tigge/" 
        target="_top">TIGGE</a> grib2 files, so now all TIGGE files should 
        be interpreted correctly. 'Reduced' global gaussian grids (from 
        ECMWF) are now expanded to full global gaussian grids automatically
        using linear interpolation.
      </li>
      <li>
        <b>20070503</b>: Now partially supports grid definition template 90
        (space-view satellite projection). Can't yet handle case when 
        sub-satellite point is off the equator and earth is specified as an
        oblate spheroid. Does work with EUMETSAT grib2 files.  Bug fix for 
        Oblate Spheroid earth shape (major and minor radii are actually in 
        km, not m).
      </li>
    </ul>

<hr />
<div class="fields">      <p><strong>Author:</strong>
        Jeffrey Whitaker.
      </p>
      <p><strong>Contact:</strong>
        <a href="mailto:jeffrey.s.whitaker@noaa.gov" target="_top">Jeff 
        Whitaker</a>
      </p>
      <p><strong>Version:</strong>
        20070503
      </p>
      <p><strong>Copyright:</strong>
        copyright 2007 by Jeffrey Whitaker.
      </p>
      <p><strong>License:</strong>
        Permission to use, copy, modify, and distribute this software and 
        its documentation for any purpose and without fee is hereby 
        granted, provided that the above copyright notice appear in all 
        copies and that both that copyright notice and this permission 
        notice appear in supporting documentation. THE AUTHOR DISCLAIMS ALL
        WARRANTIES WITH REGARD TO THIS SOFTWARE, INCLUDING ALL IMPLIED 
        WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE 
        AUTHOR BE LIABLE FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES
        OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR 
        PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER 
        TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR 
        PERFORMANCE OF THIS SOFTWARE.
      </p>
</div><!-- ==================== CLASSES ==================== -->
<a name="section-Classes"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Classes</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="grib2.grib2new.Grib2Encode-class.html" class="summary-name">Grib2Encode</a><br />
      Class for encoding data into a GRIB2 message.
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="grib2.grib2new.Grib2Message-class.html" class="summary-name">Grib2Message</a>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Functions</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="Grib2Decode"></a><span class="summary-sig-name">Grib2Decode</span>(<span class="summary-sig-arg">filename</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="grib2.grib2new-pysrc.html#Grib2Decode">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="getieeeint"></a><span class="summary-sig-name">getieeeint</span>(<span class="summary-sig-arg">i</span>)</span><br />
      convert an IEEE format 32 bit integer to a float</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="grib2.grib2new-pysrc.html#getieeeint">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="putieeeint"></a><span class="summary-sig-name">putieeeint</span>(<span class="summary-sig-arg">r</span>)</span><br />
      convert a float to a IEEE format 32 bit integer</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="grib2.grib2new-pysrc.html#putieeeint">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Variables</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="__version__"></a><span class="summary-name">__version__</span> = <code title="'20070503'"><code class="variable-quote">'</code><code class="variable-string">20070503</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="jpeg2000_support"></a><span class="summary-name">jpeg2000_support</span> = <code title="False">False</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="png_support"></a><span class="summary-name">png_support</span> = <code title="False">False</code>
    </td>
  </tr>
</table>
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="grib2-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Mon Jan  5 10:20:22 2009
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
